(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const _ of r)if(_.type==="childList")for(const c of _.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const _={};return r.integrity&&(_.integrity=r.integrity),r.referrerPolicy&&(_.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?_.credentials="include":r.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function n(r){if(r.ep)return;r.ep=!0;const _=o(r);fetch(r.href,_)}})();var X,y,$e,M,ae,Ce,Y,ne,q,ee,O={},Se=[],De=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,_e=Array.isArray;function P(t,e){for(var o in e)t[o]=e[o];return t}function Pe(t){var e=t.parentNode;e&&e.removeChild(t)}function Oe(t,e,o){var n,r,_,c={};for(_ in e)_=="key"?n=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?X.call(arguments,2):o),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return z(t,c,n,r,null)}function z(t,e,o,n,r){var _={type:t,props:e,key:o,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++$e,__i:-1,__u:0};return r==null&&y.vnode!=null&&y.vnode(_),_}function F(t){return t.children}function W(t,e){this.props=t,this.context=e}function E(t,e){if(e==null)return t.__?E(t.__,t.__i+1):null;for(var o;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null)return o.__e;return typeof t.type=="function"?E(t):null}function He(t){var e,o;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null){t.__e=t.__c.base=o.__e;break}return He(t)}}function ue(t){(!t.__d&&(t.__d=!0)&&M.push(t)&&!R.__r++||ae!==y.debounceRendering)&&((ae=y.debounceRendering)||Ce)(R)}function R(){var t,e,o,n,r,_,c,a;for(M.sort(Y);t=M.shift();)t.__d&&(e=M.length,n=void 0,_=(r=(o=t).__v).__e,c=[],a=[],o.__P&&((n=P({},r)).__v=r.__v+1,y.vnode&&y.vnode(n),se(o.__P,n,r,o.__n,o.__P.namespaceURI,32&r.__u?[_]:null,c,_??E(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,Ee(c,n,a),n.__e!=_&&He(n)),M.length>e&&M.sort(Y));R.__r=0}function Ae(t,e,o,n,r,_,c,a,u,l,p){var s,m,i,f,w,k=n&&n.__k||Se,v=e.length;for(o.__d=u,Be(o,e,k),u=o.__d,s=0;s<v;s++)(i=o.__k[s])!=null&&typeof i!="boolean"&&typeof i!="function"&&(m=i.__i===-1?O:k[i.__i]||O,i.__i=s,se(t,i,m,r,_,c,a,u,l,p),f=i.__e,i.ref&&m.ref!=i.ref&&(m.ref&&ie(m.ref,null,i),p.push(i.ref,i.__c||f,i)),w==null&&f!=null&&(w=f),65536&i.__u||m.__k===i.__k?(u&&!u.isConnected&&(u=E(m)),u=Me(i,u,t)):typeof i.type=="function"&&i.__d!==void 0?u=i.__d:f&&(u=f.nextSibling),i.__d=void 0,i.__u&=-196609);o.__d=u,o.__e=w}function Be(t,e,o){var n,r,_,c,a,u=e.length,l=o.length,p=l,s=0;for(t.__k=[],n=0;n<u;n++)c=n+s,(r=t.__k[n]=(r=e[n])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?z(null,r,null,null,null):_e(r)?z(F,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?z(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=t,r.__b=t.__b+1,a=Ue(r,o,c,p),r.__i=a,_=null,a!==-1&&(p--,(_=o[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&s--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a===c+1?s++:a>c?p>u-c?s+=a-c:s--:a<c?a==c-1&&(s=a-c):s=0,a!==n+s&&(r.__u|=65536))):(_=o[c])&&_.key==null&&_.__e&&(131072&_.__u)==0&&(_.__e==t.__d&&(t.__d=E(_)),te(_,_,!1),o[c]=null,p--);if(p)for(n=0;n<l;n++)(_=o[n])!=null&&(131072&_.__u)==0&&(_.__e==t.__d&&(t.__d=E(_)),te(_,_))}function Me(t,e,o){var n,r;if(typeof t.type=="function"){for(n=t.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=t,e=Me(n[r],e,o));return e}t.__e!=e&&(o.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Ue(t,e,o,n){var r=t.key,_=t.type,c=o-1,a=o+1,u=e[o];if(u===null||u&&r==u.key&&_===u.type&&(131072&u.__u)==0)return o;if(n>(u!=null&&(131072&u.__u)==0?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&(131072&u.__u)==0&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&(131072&u.__u)==0&&r==u.key&&_===u.type)return a;a++}}return-1}function fe(t,e,o){e[0]==="-"?t.setProperty(e,o??""):t[e]=o==null?"":typeof o!="number"||De.test(e)?o:o+"px"}function U(t,e,o,n,r){var _;e:if(e==="style")if(typeof o=="string")t.style.cssText=o;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)o&&e in o||fe(t.style,e,"");if(o)for(e in o)n&&o[e]===n[e]||fe(t.style,e,o[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=o,o?n?o.u=n.u:(o.u=ne,t.addEventListener(e,_?ee:q,_)):t.removeEventListener(e,_?ee:q,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e in t)try{t[e]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,o))}}function de(t){return function(e){if(this.l){var o=this.l[e.type+t];if(e.t==null)e.t=ne++;else if(e.t<o.u)return;return o(y.event?y.event(e):e)}}}function se(t,e,o,n,r,_,c,a,u,l){var p,s,m,i,f,w,k,v,g,S,N,H,B,T,D,C=e.type;if(e.constructor!==void 0)return null;128&o.__u&&(u=!!(32&o.__u),_=[a=e.__e=o.__e]),(p=y.__b)&&p(e);e:if(typeof C=="function")try{if(v=e.props,g=(p=C.contextType)&&n[p.__c],S=p?g?g.props.value:p.__:n,o.__c?k=(s=e.__c=o.__c).__=s.__E:("prototype"in C&&C.prototype.render?e.__c=s=new C(v,S):(e.__c=s=new W(v,S),s.constructor=C,s.render=ze),g&&g.sub(s),s.props=v,s.state||(s.state={}),s.context=S,s.__n=n,m=s.__d=!0,s.__h=[],s._sb=[]),s.__s==null&&(s.__s=s.state),C.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=P({},s.__s)),P(s.__s,C.getDerivedStateFromProps(v,s.__s))),i=s.props,f=s.state,s.__v=e,m)C.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(C.getDerivedStateFromProps==null&&v!==i&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(v,S),!s.__e&&(s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(v,s.__s,S)===!1||e.__v===o.__v)){for(e.__v!==o.__v&&(s.props=v,s.state=s.__s,s.__d=!1),e.__e=o.__e,e.__k=o.__k,e.__k.forEach(function(A){A&&(A.__=e)}),N=0;N<s._sb.length;N++)s.__h.push(s._sb[N]);s._sb=[],s.__h.length&&c.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(v,s.__s,S),s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(i,f,w)})}if(s.context=S,s.props=v,s.__P=t,s.__e=!1,H=y.__r,B=0,"prototype"in C&&C.prototype.render){for(s.state=s.__s,s.__d=!1,H&&H(e),p=s.render(s.props,s.state,s.context),T=0;T<s._sb.length;T++)s.__h.push(s._sb[T]);s._sb=[]}else do s.__d=!1,H&&H(e),p=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++B<25);s.state=s.__s,s.getChildContext!=null&&(n=P(P({},n),s.getChildContext())),m||s.getSnapshotBeforeUpdate==null||(w=s.getSnapshotBeforeUpdate(i,f)),Ae(t,_e(D=p!=null&&p.type===F&&p.key==null?p.props.children:p)?D:[D],e,o,n,r,_,c,a,u,l),s.base=e.__e,e.__u&=-161,s.__h.length&&c.push(s),k&&(s.__E=s.__=null)}catch(A){e.__v=null,u||_!=null?(e.__e=a,e.__u|=u?160:32,_[_.indexOf(a)]=null):(e.__e=o.__e,e.__k=o.__k),y.__e(A,e,o)}else _==null&&e.__v===o.__v?(e.__k=o.__k,e.__e=o.__e):e.__e=Ie(o.__e,e,o,n,r,_,c,u,l);(p=y.diffed)&&p(e)}function Ee(t,e,o){e.__d=void 0;for(var n=0;n<o.length;n++)ie(o[n],o[++n],o[++n]);y.__c&&y.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){y.__e(_,r.__v)}})}function Ie(t,e,o,n,r,_,c,a,u){var l,p,s,m,i,f,w,k=o.props,v=e.props,g=e.type;if(g==="svg"?r="http://www.w3.org/2000/svg":g==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(l=0;l<_.length;l++)if((i=_[l])&&"setAttribute"in i==!!g&&(g?i.localName===g:i.nodeType===3)){t=i,_[l]=null;break}}if(t==null){if(g===null)return document.createTextNode(v);t=document.createElementNS(r,g,v.is&&v),_=null,a=!1}if(g===null)k===v||a&&t.data===v||(t.data=v);else{if(_=_&&X.call(t.childNodes),k=o.props||O,!a&&_!=null)for(k={},l=0;l<t.attributes.length;l++)k[(i=t.attributes[l]).name]=i.value;for(l in k)if(i=k[l],l!="children"){if(l=="dangerouslySetInnerHTML")s=i;else if(l!=="key"&&!(l in v)){if(l=="value"&&"defaultValue"in v||l=="checked"&&"defaultChecked"in v)continue;U(t,l,null,i,r)}}for(l in v)i=v[l],l=="children"?m=i:l=="dangerouslySetInnerHTML"?p=i:l=="value"?f=i:l=="checked"?w=i:l==="key"||a&&typeof i!="function"||k[l]===i||U(t,l,i,k[l],r);if(p)a||s&&(p.__html===s.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(s&&(t.innerHTML=""),Ae(t,_e(m)?m:[m],e,o,n,g==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:o.__k&&E(o,0),a,u),_!=null)for(l=_.length;l--;)_[l]!=null&&Pe(_[l]);a||(l="value",f!==void 0&&(f!==t[l]||g==="progress"&&!f||g==="option"&&f!==k[l])&&U(t,l,f,k[l],r),l="checked",w!==void 0&&w!==t[l]&&U(t,l,w,k[l],r))}return t}function ie(t,e,o){try{typeof t=="function"?t(e):t.current=e}catch(n){y.__e(n,o)}}function te(t,e,o){var n,r;if(y.unmount&&y.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||ie(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(_){y.__e(_,e)}n.base=n.__P=null}if(n=t.__k)for(r=0;r<n.length;r++)n[r]&&te(n[r],e,o||typeof t.type!="function");o||t.__e==null||Pe(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function ze(t,e,o){return this.constructor(t,o)}function We(t,e,o){var n,r,_,c;y.__&&y.__(t,e),r=(n=!1)?null:e.__k,_=[],c=[],se(e,t=e.__k=Oe(F,null,[t]),r||O,O,e.namespaceURI,r?null:e.firstChild?X.call(e.childNodes):null,_,r?r.__e:e.firstChild,n,c),Ee(_,t,c)}X=Se.slice,y={__e:function(t,e,o,n){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,n||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},$e=0,W.prototype.setState=function(t,e){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=P({},this.state),typeof t=="function"&&(t=t(P({},o),this.props)),t&&P(o,t),t!=null&&this.__v&&(e&&this._sb.push(e),ue(this))},W.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ue(this))},W.prototype.render=F,M=[],Ce=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Y=function(t,e){return t.__v.__b-e.__v.__b},R.__r=0,ne=0,q=de(!1),ee=de(!0);var Ve=0;function h(t,e,o,n,r,_){e||(e={});var c,a,u=e;if("ref"in u)for(a in u={},e)a=="ref"?c=e[a]:u[a]=e[a];var l={type:t,props:u,key:o,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Ve,__i:-1,__u:0,__source:r,__self:_};if(typeof t=="function"&&(c=t.defaultProps))for(a in c)u[a]===void 0&&(u[a]=c[a]);return y.vnode&&y.vnode(l),l}const Ke=()=>fetch("https://data.aoe4world.com/units/all.json").then(t=>t.json()),Ne=t=>Object.entries(Object.groupBy(t,e=>e.baseId)).map(([e,o])=>{const n=Array.from(new Set(o.flatMap(i=>{var f;return((f=i.movement)==null?void 0:f.speed)??[]}))).sort(),r=o.flatMap(i=>i.weapons.map(f=>f?f.damage/f.speed:0)),_=Array.from(new Set(o.flatMap(i=>i.armor.map(f=>f?f.type[0]+f.value:"0")))),c=i=>{const f=w=>i[w]?w[0]+i[w]:"";return[f("food"),f("wood"),f("gold"),f("stone"),f("oliveoil"),`(${i.popcap??"_"}/${i.time??"_"})`,f("vizier")].join("")},a=i=>{const f=w=>i[w]||0;return f("food")+f("wood")+f("gold")+f("stone")+f("oliveoil")},u=Array.from(new Set(o.flatMap(i=>c(i.costs)))),l=Array.from(new Set(o.flatMap(i=>a(i.costs)))),p=Array.from(new Set(o.flatMap(i=>i.classes))),s=Array.from(new Set(o.flatMap(i=>i.producedBy))),m=Array.from(new Set(o.flatMap(i=>i.civs.map(f=>`${f}${i.age}`))));return{id:o[0].baseId,name:o[0].baseId,speed:n[0]??-1,dps:r[0]??-1,armors:_.join(),costText:u.join(),costs:l.sort((i,f)=>i-f)[0]??0,civs:m,classes:p,producedBy:s,z_:o,z_speed2:n.join(),z_dps:r.join()}}).sort((e,o)=>(o==null?void 0:o.speed)-(e==null?void 0:e.speed));var J,b,Z,pe,oe=0,Te=[],V=[],$=y,he=$.__b,me=$.__r,ve=$.diffed,ye=$.__c,ge=$.unmount,be=$.__;function je(t,e){$.__h&&$.__h(b,t,oe||e),oe=0;var o=b.__H||(b.__H={__:[],__h:[]});return t>=o.__.length&&o.__.push({__V:V}),o.__[t]}function Le(t,e,o){var n=je(J++,2);if(n.t=t,!n.__c&&(n.__=[Ge(void 0,e),function(a){var u=n.__N?n.__N[0]:n.__[0],l=n.t(u,a);u!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=b,!b.u)){var r=function(a,u,l){if(!n.__c.__H)return!0;var p=n.__c.__H.__.filter(function(m){return!!m.__c});if(p.every(function(m){return!m.__N}))return!_||_.call(this,a,u,l);var s=!1;return p.forEach(function(m){if(m.__N){var i=m.__[0];m.__=m.__N,m.__N=void 0,i!==m.__[0]&&(s=!0)}}),!(!s&&n.__c.props===a)&&(!_||_.call(this,a,u,l))};b.u=!0;var _=b.shouldComponentUpdate,c=b.componentWillUpdate;b.componentWillUpdate=function(a,u,l){if(this.__e){var p=_;_=void 0,r(a,u,l),_=p}c&&c.call(this,a,u,l)},b.shouldComponentUpdate=r}return n.__N||n.__}function I(t){return oe=5,Re(function(){return{current:t}},[])}function Re(t,e){var o=je(J++,7);return Ze(o.__H,e)?(o.__V=t(),o.i=e,o.__h=t,o.__V):o.__}function Je(){for(var t;t=Te.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(K),t.__H.__h.forEach(re),t.__H.__h=[]}catch(e){t.__H.__h=[],$.__e(e,t.__v)}}$.__b=function(t){b=null,he&&he(t)},$.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),be&&be(t,e)},$.__r=function(t){me&&me(t),J=0;var e=(b=t.__c).__H;e&&(Z===b?(e.__h=[],b.__h=[],e.__.forEach(function(o){o.__N&&(o.__=o.__N),o.__V=V,o.__N=o.i=void 0})):(e.__h.forEach(K),e.__h.forEach(re),e.__h=[],J=0)),Z=b},$.diffed=function(t){ve&&ve(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Te.push(e)!==1&&pe===$.requestAnimationFrame||((pe=$.requestAnimationFrame)||Xe)(Je)),e.__H.__.forEach(function(o){o.i&&(o.__H=o.i),o.__V!==V&&(o.__=o.__V),o.i=void 0,o.__V=V})),Z=b=null},$.__c=function(t,e){e.some(function(o){try{o.__h.forEach(K),o.__h=o.__h.filter(function(n){return!n.__||re(n)})}catch(n){e.some(function(r){r.__h&&(r.__h=[])}),e=[],$.__e(n,o.__v)}}),ye&&ye(t,e)},$.unmount=function(t){ge&&ge(t);var e,o=t.__c;o&&o.__H&&(o.__H.__.forEach(function(n){try{K(n)}catch(r){e=r}}),o.__H=void 0,e&&$.__e(e,o.__v))};var we=typeof requestAnimationFrame=="function";function Xe(t){var e,o=function(){clearTimeout(n),we&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(o,100);we&&(e=requestAnimationFrame(o))}function K(t){var e=b,o=t.__c;typeof o=="function"&&(t.__c=void 0,o()),b=e}function re(t){var e=b;t.__c=t.__(),b=e}function Ze(t,e){return!t||t.length!==e.length||e.some(function(o,n){return o!==t[n]})}function Ge(t,e){return typeof e=="function"?e(t):e}const L=t=>{const e=(o,n)=>n.all?o.every(([,r])=>r)?o.map(([r])=>[r,!1]):o.map(([r])=>[r,!0]):n.keys?o.map(([r])=>[r,n.keys.includes(r)]):o.map(([r,_])=>r===n.key?[r,n.val]:[r,_]);return()=>{const[o,n]=Le(e,t),r=o.filter(_=>_[1]).map(_=>_[0]);return[o,n,r]}},Qe=[{id:"ab",name:"Abbasid Dynasty",href:"https://aoe4world.com/explorer/civs/abbasid"},{id:"ay",name:"Ayyubids",href:"https://aoe4world.com/explorer/civs/ayyubids"},{id:"by",name:"Byzantines",href:"https://aoe4world.com/explorer/civs/byzantines"},{id:"ch",name:"Chinese",href:"https://aoe4world.com/explorer/civs/chinese"},{id:"de",name:"Delhi Sultanate",href:"https://aoe4world.com/explorer/civs/delhi"},{id:"en",name:"English",href:"https://aoe4world.com/explorer/civs/english"},{id:"fr",name:"French",href:"https://aoe4world.com/explorer/civs/french"},{id:"hr",name:"Holy Roman Empire",href:"https://aoe4world.com/explorer/civs/hre"},{id:"ja",name:"Japanese",href:"https://aoe4world.com/explorer/civs/japanese"},{id:"je",name:"Jeanne d'Arc",href:"https://aoe4world.com/explorer/civs/jeannedarc"},{id:"ma",name:"Malians",href:"https://aoe4world.com/explorer/civs/malians"},{id:"mo",name:"Mongols",href:"https://aoe4world.com/explorer/civs/mongols"},{id:"od",name:"Order of the Dragon",href:"https://aoe4world.com/explorer/civs/orderofthedragon"},{id:"ot",name:"Ottomans",href:"https://aoe4world.com/explorer/civs/ottomans"},{id:"ru",name:"Rus",href:"https://aoe4world.com/explorer/civs/rus"},{id:"zx",name:"Zhu Xi's Legacy",href:"https://aoe4world.com/explorer/civs/zhuxi"},{id:"kt",name:"Knights Templar",href:"https://aoe4world.com/explorer/civs/templar"},{id:"hl",name:"House Lancaster",href:"https://aoe4world.com/explorer/civs/lancaster"}],Ye=Qe.map(t=>[t.id,!0]),qe=L(Ye),et=L([1,2,3,4].map(t=>[`${t}`,t<=2])),ke=(t="",e="")=>t.localeCompare(e,void 0,{numeric:!0}),G=(t=0,e=0)=>t-e,Q=(t=[],e=[])=>`${t}`.localeCompare(`${e}`,void 0,{numeric:!0}),Fe={name:ke,icon:!1,speed:G,dps:G,armors:ke,costs:G,classes:Q,producedBy:Q,civs:Q},tt=[["speed",-1],["name",1]],ot=(t,e)=>{var o;if(Fe[e]){const n=((o=t.find(r=>e===r[0]))==null?void 0:o[1])??1;return[[e,-n],...t.filter(r=>e!==r[0])]}return t},rt=()=>Le(ot,tt),nt=t=>(e,o)=>{for(const[n,r]of t)if(n!=="icon"){const _=Fe[n](e==null?void 0:e[n],o==null?void 0:o[n]);if(_)return r*_}return 0},_t=[["name",!0],["icon",!0],["speed",!0],["dps",!0],["armors",!1],["costs",!1],["classes",!1],["producedBy",!1],["civs",!0]],st=L(_t),xe={name:({item:t})=>h("a",{href:`https://aoe4world.com/explorer/units/${t.id}`,rel:"nofollow noopener noreferrer",target:"_blank",children:t.id}),icon:({item:t})=>Array.from(new Set(t.z_.map(e=>e.icon))).filter(e=>!!e).map(e=>{var o;return h("img",{src:e,title:(o=e.match(/\/([^/]*)(\.[^.]+)$/u))==null?void 0:o[1]},e)}),dps:({item:t})=>h("span",{children:t.dps.toFixed(2)}),costs:({item:t})=>h("span",{children:t.costText}),classes:({item:t})=>h("span",{children:t.classes.join()}),producedBy:({item:t})=>h("span",{children:t.producedBy.join()}),civs:({item:t})=>h("span",{children:t.civs.join()}),def:({item:t,p:e})=>h("span",{children:t[e]})},it=(t,e)=>{const o=xe[e]||xe.def;return h(o,{item:t,p:e})},ct=t=>t.target&&t.target instanceof HTMLInputElement?t.target.checked:!1,j=({title:t,set:e,update:o,sub:n})=>h(F,{children:[h("dt",{children:t}),h("dd",{children:[n===!1?null:h("div",{class:"line",children:[h("label",{children:[h("input",{type:"checkbox",checked:e.every(([,r])=>r),onChange:()=>o({all:!0})}),"all"]},"all"),n]}),e.map(([r,_])=>h("label",{children:[h("input",{type:"checkbox",checked:_,onChange:c=>o({key:r,val:ct(c)})}),r]},r))]})]}),lt=({data:t})=>{var C,A,ce,le;const e=(C=I()).current??(C.current=Array.from(new Set(t.flatMap(d=>d.classes)))),o=(A=I()).current??(A.current=L(e.map(d=>[d,!0]))),n=(ce=I()).current??(ce.current=L(e.map(d=>[d,d==="ship"||d==="warship"]))),r=(le=I()).current??(le.current=L(Array.from(new Set(t.flatMap(d=>d.producedBy))).map(d=>[d,!0]))),[_,c]=st(),[a,u]=qe(),[l,p,s]=et(),[m,i]=rt(),[f,w,k]=o(),[v,g,S]=n(),[N,H,B]=r(),T=Object.fromEntries(a),D=Ne(t.filter(d=>s.includes(`${d.age}`)).filter(d=>d.classes.some(x=>k.includes(x))).filter(d=>!d.classes.some(x=>S.includes(x))).filter(d=>d.producedBy.some(x=>B.includes(x))).map(d=>({...d,civs:d.civs.filter(x=>T[x])})).filter(d=>d.civs.length)).sort(nt(m));return h("div",{children:[h("dl",{class:"tools",children:[h(j,{title:"civilizations",set:a,update:u}),h(j,{title:"age",set:l,update:p,sub:!1}),h(j,{title:"keys",set:_,update:c,sub:!1}),_.some(([d,x])=>d==="classes"&&x)?h(F,{children:[h(j,{title:"classes",set:f,update:w}),h(j,{title:"exclude classes",set:v,update:g,sub:h("label",{children:[h("input",{type:"checkbox",checked:v.every(([d,x])=>d==="ship"||d==="warship"?x:!x),onChange:()=>g({keys:["ship","warship"]})}),"ship or warship"]},"ship")})]}):null,_.some(([d,x])=>d==="producedBy"&&x)?h(j,{title:"producedBy",set:N,update:H}):null]}),h("table",{children:[h("thead",{children:h("tr",{children:_.filter(([,d])=>d).map(([d])=>h("th",{onClick:()=>i(d),children:d},d))})}),h("tbody",{children:D.map(d=>h("tr",{children:_.filter(([,x])=>x).map(([x])=>h("td",{children:it(d,x)},x))},d.id))})]})]})},at=async()=>{const t=await Ke(),e=Ne(t.data);console.log(e),globalThis.json=t,globalThis.list=e;const o=document.querySelector("main");o&&We(h(lt,{data:t.data}),o)};Promise.resolve().then(at).catch(t=>console.error(t));
