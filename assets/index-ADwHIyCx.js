(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();var Y,w,Se,T,ue,Ne,te,ie,oe,re,W={},He=[],ze=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ce=Array.isArray;function j(t,e){for(var o in e)t[o]=e[o];return t}function Ae(t){var e=t.parentNode;e&&e.removeChild(t)}function Ie(t,e,o){var n,r,s,c={};for(s in e)s=="key"?n=e[s]:s=="ref"?r=e[s]:c[s]=e[s];if(arguments.length>2&&(c.children=arguments.length>3?Y.call(arguments,2):o),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)c[s]===void 0&&(c[s]=t.defaultProps[s]);return K(t,c,n,r,null)}function K(t,e,o,n,r){var s={type:t,props:e,key:o,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++Se,__i:-1,__u:0};return r==null&&w.vnode!=null&&w.vnode(s),s}function B(t){return t.children}function J(t,e){this.props=t,this.context=e}function F(t,e){if(e==null)return t.__?F(t.__,t.__i+1):null;for(var o;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null)return o.__e;return typeof t.type=="function"?F(t):null}function Me(t){var e,o;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null){t.__e=t.__c.base=o.__e;break}return Me(t)}}function pe(t){(!t.__d&&(t.__d=!0)&&T.push(t)&&!G.__r++||ue!==w.debounceRendering)&&((ue=w.debounceRendering)||Ne)(G)}function G(){var t,e,o,n,r,s,c,a;for(T.sort(te);t=T.shift();)t.__d&&(e=T.length,n=void 0,s=(r=(o=t).__v).__e,c=[],a=[],o.__P&&((n=j({},r)).__v=r.__v+1,w.vnode&&w.vnode(n),le(o.__P,n,r,o.__n,o.__P.namespaceURI,32&r.__u?[s]:null,c,s??F(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,Te(c,n,a),n.__e!=s&&Me(n)),T.length>e&&T.sort(te));G.__r=0}function je(t,e,o,n,r,s,c,a,u,l,h){var _,v,p,b,S,x=n&&n.__k||He,y=e.length;for(o.__d=u,We(o,e,x),u=o.__d,_=0;_<y;_++)(p=o.__k[_])!=null&&typeof p!="boolean"&&typeof p!="function"&&(v=p.__i===-1?W:x[p.__i]||W,p.__i=_,le(t,p,v,r,s,c,a,u,l,h),b=p.__e,p.ref&&v.ref!=p.ref&&(v.ref&&ae(v.ref,null,p),h.push(p.ref,p.__c||b,p)),S==null&&b!=null&&(S=b),65536&p.__u||v.__k===p.__k?(u&&!u.isConnected&&(u=F(v)),u=Ee(p,u,t)):typeof p.type=="function"&&p.__d!==void 0?u=p.__d:b&&(u=b.nextSibling),p.__d=void 0,p.__u&=-196609);o.__d=u,o.__e=S}function We(t,e,o){var n,r,s,c,a,u=e.length,l=o.length,h=l,_=0;for(t.__k=[],n=0;n<u;n++)c=n+_,(r=t.__k[n]=(r=e[n])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?K(null,r,null,null,null):ce(r)?K(B,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?K(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=t,r.__b=t.__b+1,a=Re(r,o,c,h),r.__i=a,s=null,a!==-1&&(h--,(s=o[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&_--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a===c+1?_++:a>c?h>u-c?_+=a-c:_--:a<c?a==c-1&&(_=a-c):_=0,a!==n+_&&(r.__u|=65536))):(s=o[c])&&s.key==null&&s.__e&&(131072&s.__u)==0&&(s.__e==t.__d&&(t.__d=F(s)),ne(s,s,!1),o[c]=null,h--);if(h)for(n=0;n<l;n++)(s=o[n])!=null&&(131072&s.__u)==0&&(s.__e==t.__d&&(t.__d=F(s)),ne(s,s))}function Ee(t,e,o){var n,r;if(typeof t.type=="function"){for(n=t.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=t,e=Ee(n[r],e,o));return e}t.__e!=e&&(o.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Re(t,e,o,n){var r=t.key,s=t.type,c=o-1,a=o+1,u=e[o];if(u===null||u&&r==u.key&&s===u.type&&(131072&u.__u)==0)return o;if(n>(u!=null&&(131072&u.__u)==0?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&(131072&u.__u)==0&&r==u.key&&s===u.type)return c;c--}if(a<e.length){if((u=e[a])&&(131072&u.__u)==0&&r==u.key&&s===u.type)return a;a++}}return-1}function fe(t,e,o){e[0]==="-"?t.setProperty(e,o??""):t[e]=o==null?"":typeof o!="number"||ze.test(e)?o:o+"px"}function R(t,e,o,n,r){var s;e:if(e==="style")if(typeof o=="string")t.style.cssText=o;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)o&&e in o||fe(t.style,e,"");if(o)for(e in o)n&&o[e]===n[e]||fe(t.style,e,o[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=o,o?n?o.u=n.u:(o.u=ie,t.addEventListener(e,s?re:oe,s)):t.removeEventListener(e,s?re:oe,s);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e in t)try{t[e]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,o))}}function de(t){return function(e){if(this.l){var o=this.l[e.type+t];if(e.t==null)e.t=ie++;else if(e.t<o.u)return;return o(w.event?w.event(e):e)}}}function le(t,e,o,n,r,s,c,a,u,l){var h,_,v,p,b,S,x,y,k,N,M,H,E,i,f,g=e.type;if(e.constructor!==void 0)return null;128&o.__u&&(u=!!(32&o.__u),s=[a=e.__e=o.__e]),(h=w.__b)&&h(e);e:if(typeof g=="function")try{if(y=e.props,k=(h=g.contextType)&&n[h.__c],N=h?k?k.props.value:h.__:n,o.__c?x=(_=e.__c=o.__c).__=_.__E:("prototype"in g&&g.prototype.render?e.__c=_=new g(y,N):(e.__c=_=new J(y,N),_.constructor=g,_.render=Ke),k&&k.sub(_),_.props=y,_.state||(_.state={}),_.context=N,_.__n=n,v=_.__d=!0,_.__h=[],_._sb=[]),_.__s==null&&(_.__s=_.state),g.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=j({},_.__s)),j(_.__s,g.getDerivedStateFromProps(y,_.__s))),p=_.props,b=_.state,_.__v=e,v)g.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(g.getDerivedStateFromProps==null&&y!==p&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(y,N),!_.__e&&(_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(y,_.__s,N)===!1||e.__v===o.__v)){for(e.__v!==o.__v&&(_.props=y,_.state=_.__s,_.__d=!1),e.__e=o.__e,e.__k=o.__k,e.__k.forEach(function(A){A&&(A.__=e)}),M=0;M<_._sb.length;M++)_.__h.push(_._sb[M]);_._sb=[],_.__h.length&&c.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(y,_.__s,N),_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(p,b,S)})}if(_.context=N,_.props=y,_.__P=t,_.__e=!1,H=w.__r,E=0,"prototype"in g&&g.prototype.render){for(_.state=_.__s,_.__d=!1,H&&H(e),h=_.render(_.props,_.state,_.context),i=0;i<_._sb.length;i++)_.__h.push(_._sb[i]);_._sb=[]}else do _.__d=!1,H&&H(e),h=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++E<25);_.state=_.__s,_.getChildContext!=null&&(n=j(j({},n),_.getChildContext())),v||_.getSnapshotBeforeUpdate==null||(S=_.getSnapshotBeforeUpdate(p,b)),je(t,ce(f=h!=null&&h.type===B&&h.key==null?h.props.children:h)?f:[f],e,o,n,r,s,c,a,u,l),_.base=e.__e,e.__u&=-161,_.__h.length&&c.push(_),x&&(_.__E=_.__=null)}catch(A){e.__v=null,u||s!=null?(e.__e=a,e.__u|=u?160:32,s[s.indexOf(a)]=null):(e.__e=o.__e,e.__k=o.__k),w.__e(A,e,o)}else s==null&&e.__v===o.__v?(e.__k=o.__k,e.__e=o.__e):e.__e=Ve(o.__e,e,o,n,r,s,c,u,l);(h=w.diffed)&&h(e)}function Te(t,e,o){e.__d=void 0;for(var n=0;n<o.length;n++)ae(o[n],o[++n],o[++n]);w.__c&&w.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(s){s.call(r)})}catch(s){w.__e(s,r.__v)}})}function Ve(t,e,o,n,r,s,c,a,u){var l,h,_,v,p,b,S,x=o.props,y=e.props,k=e.type;if(k==="svg"?r="http://www.w3.org/2000/svg":k==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((p=s[l])&&"setAttribute"in p==!!k&&(k?p.localName===k:p.nodeType===3)){t=p,s[l]=null;break}}if(t==null){if(k===null)return document.createTextNode(y);t=document.createElementNS(r,k,y.is&&y),s=null,a=!1}if(k===null)x===y||a&&t.data===y||(t.data=y);else{if(s=s&&Y.call(t.childNodes),x=o.props||W,!a&&s!=null)for(x={},l=0;l<t.attributes.length;l++)x[(p=t.attributes[l]).name]=p.value;for(l in x)if(p=x[l],l!="children"){if(l=="dangerouslySetInnerHTML")_=p;else if(l!=="key"&&!(l in y)){if(l=="value"&&"defaultValue"in y||l=="checked"&&"defaultChecked"in y)continue;R(t,l,null,p,r)}}for(l in y)p=y[l],l=="children"?v=p:l=="dangerouslySetInnerHTML"?h=p:l=="value"?b=p:l=="checked"?S=p:l==="key"||a&&typeof p!="function"||x[l]===p||R(t,l,p,x[l],r);if(h)a||_&&(h.__html===_.__html||h.__html===t.innerHTML)||(t.innerHTML=h.__html),e.__k=[];else if(_&&(t.innerHTML=""),je(t,ce(v)?v:[v],e,o,n,k==="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:o.__k&&F(o,0),a,u),s!=null)for(l=s.length;l--;)s[l]!=null&&Ae(s[l]);a||(l="value",b!==void 0&&(b!==t[l]||k==="progress"&&!b||k==="option"&&b!==x[l])&&R(t,l,b,x[l],r),l="checked",S!==void 0&&S!==t[l]&&R(t,l,S,x[l],r))}return t}function ae(t,e,o){try{typeof t=="function"?t(e):t.current=e}catch(n){w.__e(n,o)}}function ne(t,e,o){var n,r;if(w.unmount&&w.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||ae(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){w.__e(s,e)}n.base=n.__P=null}if(n=t.__k)for(r=0;r<n.length;r++)n[r]&&ne(n[r],e,o||typeof t.type!="function");o||t.__e==null||Ae(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function Ke(t,e,o){return this.constructor(t,o)}function Je(t,e,o){var n,r,s,c;w.__&&w.__(t,e),r=(n=!1)?null:e.__k,s=[],c=[],le(e,t=e.__k=Ie(B,null,[t]),r||W,W,e.namespaceURI,r?null:e.firstChild?Y.call(e.childNodes):null,s,r?r.__e:e.firstChild,n,c),Te(s,t,c)}Y=He.slice,w={__e:function(t,e,o,n){for(var r,s,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,n||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},Se=0,J.prototype.setState=function(t,e){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=j({},this.state),typeof t=="function"&&(t=t(j({},o),this.props)),t&&j(o,t),t!=null&&this.__v&&(e&&this._sb.push(e),pe(this))},J.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),pe(this))},J.prototype.render=B,T=[],Ne=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,te=function(t,e){return t.__v.__b-e.__v.__b},G.__r=0,ie=0,oe=de(!1),re=de(!0);var Xe=0;function m(t,e,o,n,r,s){e||(e={});var c,a,u=e;if("ref"in u)for(a in u={},e)a=="ref"?c=e[a]:u[a]=e[a];var l={type:t,props:u,key:o,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Xe,__i:-1,__u:0,__source:r,__self:s};if(typeof t=="function"&&(c=t.defaultProps))for(a in c)u[a]===void 0&&(u[a]=c[a]);return w.vnode&&w.vnode(l),l}const Ze=()=>fetch("https://data.aoe4world.com/units/all.json").then(t=>t.json()),he=t=>{switch(t){case"ranged":return 1;case"siege":return 4;case"melee":return 1;case"fire":return 5;case"charge":return 3;default:return 2}},Fe=t=>Object.entries(Object.groupBy(t,e=>e.baseId)).map(([e,o])=>{const n=Array.from(new Set(o.flatMap(i=>i.name))),r=Array.from(new Set(o.flatMap(i=>{var f;return((f=i.movement)==null?void 0:f.speed)??[]}))).sort(),c=o.flatMap(i=>i.weapons).filter(i=>i==null?void 0:i.type).map((i,f)=>({idx:f,weapon:i})).sort((i,f)=>he(i.weapon.type)-he(f.weapon.type)||i.idx-f.idx).map(i=>i.weapon).map(i=>i?i.damage/i.speed:0),a=Array.from(new Set(o.flatMap(i=>i.armor.map(f=>f?f.type[0]+f.value:"0")))),u=Array.from(new Set(o.map(i=>i.hitpoints))),l=i=>{const f=g=>i[g]?g[0]+Math.floor(i[g]):"";return[f("food"),f("wood"),f("gold"),f("stone"),f("oliveoil"),`(${i.popcap??"_"}/${i.time??"_"})`,f("vizier")].join("")},h=i=>{const f=g=>i[g]||0;return f("food")+f("wood")+f("gold")+f("stone")+f("oliveoil")},_=Array.from(new Set(o.flatMap(i=>l(i.costs)))),v=Array.from(new Set(o.flatMap(i=>h(i.costs)))),p=(i,f)=>{const g=(i.food??0)/f,A=(i.wood??0)/f,U=(i.gold??0)/f,z=(i.stone??0)/f,I=(i.oliveoil??0)/f,d=i.time??0,C=(i.popcap??1)/f,Ue=g+A+U+z+I;return{food:g,wood:A,gold:U,stone:z,oliveoil:I,time:d,popcap:C,total:Ue}},b=(i,f=1)=>{const g=p(i,f);_.splice(0,_.length,l(g)),v.splice(0,v.length,h(g))};if(e==="shinobi"&&v.join(":")==="0"&&b({food:50,gold:50}),e==="wynguard-footman"){const i=t.find(f=>f.id==="wynguard-footmen");i!=null&&i.costs&&b(i.costs,i.costs.popcap)}if(e==="wynguard-ranger"){const i=t.find(f=>f.id==="wynguard-rangers");i!=null&&i.costs&&b(i.costs,i.costs.popcap)}e==="bedouin-swordsman"&&b({gold:425/8}),e==="bedouin-skirmisher"&&b({gold:425/8});const S=Array.from(new Set(o.flatMap(i=>i.classes))),x=Array.from(new Set(o.flatMap(i=>i.producedBy))),y=Array.from(new Set(o.flatMap(i=>i.civs.map(f=>`${f}${i.age}`)))),k=c[0]??-1,N=v.sort((i,f)=>i-f).filter(i=>0<i)[0]??0,M=0<k?k/N:0,H=u.sort((i,f)=>f-i)[0]??0,E=0<H?H/N:0;return{id:e,displayNames:n,name:n[0]??e,speed:r[0]??-1,dps:k,armors:a.join(),costText:_.join(),costs:N,dpsPerCost:M,hp:H,hpPerCost:E,civs:y,classes:S,producedBy:x,z_:o,z_speed2:r.join(),z_dps:c.join()}}).sort((e,o)=>(o==null?void 0:o.speed)-(e==null?void 0:e.speed));var Q,$,q,me,se=0,Le=[],X=[],P=w,ve=P.__b,ye=P.__r,ge=P.diffed,be=P.__c,we=P.unmount,ke=P.__;function De(t,e){P.__h&&P.__h($,t,se||e),se=0;var o=$.__H||($.__H={__:[],__h:[]});return t>=o.__.length&&o.__.push({__V:X}),o.__[t]}function Oe(t,e,o){var n=De(Q++,2);if(n.t=t,!n.__c&&(n.__=[et(void 0,e),function(a){var u=n.__N?n.__N[0]:n.__[0],l=n.t(u,a);u!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=$,!$.u)){var r=function(a,u,l){if(!n.__c.__H)return!0;var h=n.__c.__H.__.filter(function(v){return!!v.__c});if(h.every(function(v){return!v.__N}))return!s||s.call(this,a,u,l);var _=!1;return h.forEach(function(v){if(v.__N){var p=v.__[0];v.__=v.__N,v.__N=void 0,p!==v.__[0]&&(_=!0)}}),!(!_&&n.__c.props===a)&&(!s||s.call(this,a,u,l))};$.u=!0;var s=$.shouldComponentUpdate,c=$.componentWillUpdate;$.componentWillUpdate=function(a,u,l){if(this.__e){var h=s;s=void 0,r(a,u,l),s=h}c&&c.call(this,a,u,l)},$.shouldComponentUpdate=r}return n.__N||n.__}function V(t){return se=5,Ge(function(){return{current:t}},[])}function Ge(t,e){var o=De(Q++,7);return qe(o.__H,e)?(o.__V=t(),o.i=e,o.__h=t,o.__V):o.__}function Qe(){for(var t;t=Le.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Z),t.__H.__h.forEach(_e),t.__H.__h=[]}catch(e){t.__H.__h=[],P.__e(e,t.__v)}}P.__b=function(t){$=null,ve&&ve(t)},P.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),ke&&ke(t,e)},P.__r=function(t){ye&&ye(t),Q=0;var e=($=t.__c).__H;e&&(q===$?(e.__h=[],$.__h=[],e.__.forEach(function(o){o.__N&&(o.__=o.__N),o.__V=X,o.__N=o.i=void 0})):(e.__h.forEach(Z),e.__h.forEach(_e),e.__h=[],Q=0)),q=$},P.diffed=function(t){ge&&ge(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Le.push(e)!==1&&me===P.requestAnimationFrame||((me=P.requestAnimationFrame)||Ye)(Qe)),e.__H.__.forEach(function(o){o.i&&(o.__H=o.i),o.__V!==X&&(o.__=o.__V),o.i=void 0,o.__V=X})),q=$=null},P.__c=function(t,e){e.some(function(o){try{o.__h.forEach(Z),o.__h=o.__h.filter(function(n){return!n.__||_e(n)})}catch(n){e.some(function(r){r.__h&&(r.__h=[])}),e=[],P.__e(n,o.__v)}}),be&&be(t,e)},P.unmount=function(t){we&&we(t);var e,o=t.__c;o&&o.__H&&(o.__H.__.forEach(function(n){try{Z(n)}catch(r){e=r}}),o.__H=void 0,e&&P.__e(e,o.__v))};var xe=typeof requestAnimationFrame=="function";function Ye(t){var e,o=function(){clearTimeout(n),xe&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(o,100);xe&&(e=requestAnimationFrame(o))}function Z(t){var e=$,o=t.__c;typeof o=="function"&&(t.__c=void 0,o()),$=e}function _e(t){var e=$;t.__c=t.__(),$=e}function qe(t,e){return!t||t.length!==e.length||e.some(function(o,n){return o!==t[n]})}function et(t,e){return typeof e=="function"?e(t):e}const O=t=>{const e=(o,n)=>n.all?o.every(([,r])=>r)?o.map(([r])=>[r,!1]):o.map(([r])=>[r,!0]):n.keys?o.map(([r])=>[r,n.keys.includes(r)]):o.map(([r,s])=>r===n.key?[r,n.val]:[r,s]);return()=>{const[o,n]=Oe(e,t),r=o.filter(s=>s[1]).map(s=>s[0]);return[o,n,r]}},tt=[{id:"ab",name:"Abbasid Dynasty",href:"https://aoe4world.com/explorer/civs/abbasid"},{id:"ay",name:"Ayyubids",href:"https://aoe4world.com/explorer/civs/ayyubids"},{id:"by",name:"Byzantines",href:"https://aoe4world.com/explorer/civs/byzantines"},{id:"ch",name:"Chinese",href:"https://aoe4world.com/explorer/civs/chinese"},{id:"de",name:"Delhi Sultanate",href:"https://aoe4world.com/explorer/civs/delhi"},{id:"en",name:"English",href:"https://aoe4world.com/explorer/civs/english"},{id:"fr",name:"French",href:"https://aoe4world.com/explorer/civs/french"},{id:"hr",name:"Holy Roman Empire",href:"https://aoe4world.com/explorer/civs/hre"},{id:"ja",name:"Japanese",href:"https://aoe4world.com/explorer/civs/japanese"},{id:"je",name:"Jeanne d'Arc",href:"https://aoe4world.com/explorer/civs/jeannedarc"},{id:"ma",name:"Malians",href:"https://aoe4world.com/explorer/civs/malians"},{id:"mo",name:"Mongols",href:"https://aoe4world.com/explorer/civs/mongols"},{id:"od",name:"Order of the Dragon",href:"https://aoe4world.com/explorer/civs/orderofthedragon"},{id:"ot",name:"Ottomans",href:"https://aoe4world.com/explorer/civs/ottomans"},{id:"ru",name:"Rus",href:"https://aoe4world.com/explorer/civs/rus"},{id:"zx",name:"Zhu Xi's Legacy",href:"https://aoe4world.com/explorer/civs/zhuxi"},{id:"kt",name:"Knights Templar",href:"https://aoe4world.com/explorer/civs/templar"},{id:"hl",name:"House Lancaster",href:"https://aoe4world.com/explorer/civs/lancaster"}],ot=tt.map(t=>[t.id,!0]),rt=O(ot),nt=O([1,2,3,4].map(t=>[`${t}`,t<=2])),Ce=(t="",e="")=>t.localeCompare(e,void 0,{numeric:!0}),L=(t=0,e=0)=>t-e,ee=(t=[],e=[])=>`${t}`.localeCompare(`${e}`,void 0,{numeric:!0}),Be={name:Ce,icon:!1,speed:L,dps:L,armors:Ce,costs:L,dpsPerCost:L,hp:L,hpPerCost:L,classes:ee,producedBy:ee,civs:ee},st=[["speed",-1],["name",1]],_t=(t,e)=>{var o;if(Be[e]){const n=((o=t.find(r=>e===r[0]))==null?void 0:o[1])??1;return[[e,-n],...t.filter(r=>e!==r[0])]}return t},it=()=>Oe(_t,st),ct=t=>(e,o)=>{for(const[n,r]of t)if(n!=="icon"){const s=Be[n](e==null?void 0:e[n],o==null?void 0:o[n]);if(s)return r*s}return 0},lt=[["name",!0],["icon",!0],["speed",!0],["dps",!0],["armors",!1],["costs",!1],["dpsPerCost",!1],["hp",!1],["hpPerCost",!1],["classes",!1],["producedBy",!1],["civs",!0]],at=O(lt),$e=(t,e=2)=>Number.isNaN(t)?"NaN":!Number.isFinite(t)||Number.isSafeInteger(t)?`${t}`:t.toFixed(e),Pe={name:({item:t})=>m("a",{href:`https://aoe4world.com/explorer/units/${t.id}`,rel:"nofollow noopener noreferrer",target:"_blank",children:t.name}),icon:({item:t})=>Array.from(new Set(t.z_.map(e=>e.icon))).filter(e=>!!e).map(e=>{var o;return m("img",{src:e,title:(o=e.match(/\/([^/]*)(\.[^.]+)$/u))==null?void 0:o[1]},e)}),costs:({item:t})=>m("span",{children:t.costText}),dps:({item:t})=>m("span",{children:t.dps.toFixed(2)}),dpsPerCost:({item:t})=>m("span",{children:$e(t.dpsPerCost,6)}),hpPerCost:({item:t})=>m("span",{children:$e(t.hpPerCost,2)}),classes:({item:t})=>m("span",{children:t.classes.join()}),producedBy:({item:t})=>m("span",{children:t.producedBy.join()}),civs:({item:t})=>m("span",{children:t.civs.join()}),def:({item:t,p:e})=>m("span",{children:t[e]})},ut=(t,e)=>{const o=Pe[e]||Pe.def;return m(o,{item:t,p:e})},pt=t=>t.target&&t.target instanceof HTMLInputElement?t.target.checked:!1,D=({title:t,set:e,update:o,sub:n})=>m(B,{children:[m("dt",{children:t}),m("dd",{children:[n===!1?null:m("div",{class:"line",children:[m("label",{children:[m("input",{type:"checkbox",checked:e.every(([,r])=>r),onChange:()=>o({all:!0})}),"all"]},"all"),n]}),e.map(([r,s])=>m("label",{children:[m("input",{type:"checkbox",checked:s,onChange:c=>o({key:r,val:pt(c)})}),r]},r))]})]}),ft=({data:t})=>{var A,U,z,I;const e=(A=V()).current??(A.current=Array.from(new Set(t.flatMap(d=>d.classes)))),o=(U=V()).current??(U.current=O(e.map(d=>[d,!0]))),n=(z=V()).current??(z.current=O(e.map(d=>[d,d==="ship"||d==="warship"]))),r=(I=V()).current??(I.current=O(Array.from(new Set(t.flatMap(d=>d.producedBy))).map(d=>[d,!0]))),[s,c]=at(),[a,u]=rt(),[l,h,_]=nt(),[v,p]=it(),[b,S,x]=o(),[y,k,N]=n(),[M,H,E]=r(),i=Object.fromEntries(a),f=M.length===E.length,g=Fe(t.filter(d=>_.includes(`${d.age}`)).filter(d=>d.classes.some(C=>x.includes(C))).filter(d=>!d.classes.some(C=>N.includes(C))).filter(d=>f||d.producedBy.some(C=>E.includes(C))).map(d=>({...d,civs:d.civs.filter(C=>i[C])})).filter(d=>d.civs.length)).sort(ct(v));return m("div",{children:[m("dl",{class:"tools",children:[m(D,{title:"civilizations",set:a,update:u}),m(D,{title:"age",set:l,update:h,sub:!1}),m(D,{title:"keys",set:s,update:c,sub:!1}),s.some(([d,C])=>d==="classes"&&C)?m(B,{children:[m(D,{title:"classes",set:b,update:S}),m(D,{title:"exclude classes",set:y,update:k,sub:m("label",{children:[m("input",{type:"checkbox",checked:y.every(([d,C])=>d==="ship"||d==="warship"?C:!C),onChange:()=>k({keys:["ship","warship"]})}),"ship or warship"]},"ship")})]}):null,s.some(([d,C])=>d==="producedBy"&&C)?m(D,{title:"producedBy",set:M,update:H}):null]}),m("table",{children:[m("thead",{children:m("tr",{children:s.filter(([,d])=>d).map(([d])=>m("th",{onClick:()=>p(d),children:d},d))})}),m("tbody",{children:g.map(d=>m("tr",{children:s.filter(([,C])=>C).map(([C])=>m("td",{children:ut(d,C)},C))},d.id))})]})]})},dt=async()=>{const t=globalThis,e=await Ze(),o=Fe(e.data);console.log(o),t.json=e,t.list=o;const n=document.querySelector("main");n&&Je(m(ft,{data:e.data}),n)};Promise.resolve().then(dt).catch(t=>console.error(t));
