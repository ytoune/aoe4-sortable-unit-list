(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();var ee,b,Ne,D,pe,Ae,ne,ae,re,se,W={},Ee=[],We=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ce=Array.isArray;function L(t,e){for(var o in e)t[o]=e[o];return t}function He(t){var e=t.parentNode;e&&e.removeChild(t)}function Ve(t,e,o){var r,n,s,c={};for(s in e)s=="key"?r=e[s]:s=="ref"?n=e[s]:c[s]=e[s];if(arguments.length>2&&(c.children=arguments.length>3?ee.call(arguments,2):o),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)c[s]===void 0&&(c[s]=t.defaultProps[s]);return X(t,c,r,n,null)}function X(t,e,o,r,n){var s={type:t,props:e,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:n??++Ne,__i:-1,__u:0};return n==null&&b.vnode!=null&&b.vnode(s),s}function R(t){return t.children}function Z(t,e){this.props=t,this.context=e}function O(t,e){if(e==null)return t.__?O(t.__,t.__i+1):null;for(var o;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null)return o.__e;return typeof t.type=="function"?O(t):null}function Me(t){var e,o;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null){t.__e=t.__c.base=o.__e;break}return Me(t)}}function de(t){(!t.__d&&(t.__d=!0)&&D.push(t)&&!Y.__r++||pe!==b.debounceRendering)&&((pe=b.debounceRendering)||Ae)(Y)}function Y(){var t,e,o,r,n,s,c,l;for(D.sort(ne);t=D.shift();)t.__d&&(e=D.length,r=void 0,s=(n=(o=t).__v).__e,c=[],l=[],o.__P&&((r=L({},n)).__v=n.__v+1,b.vnode&&b.vnode(r),fe(o.__P,r,n,o.__n,o.__P.namespaceURI,32&n.__u?[s]:null,c,s??O(n),!!(32&n.__u),l),r.__v=n.__v,r.__.__k[r.__i]=r,Fe(c,r,l),r.__e!=s&&Me(r)),D.length>e&&D.sort(ne));Y.__r=0}function Te(t,e,o,r,n,s,c,l,f,a,d){var _,v,u,g,w,C=r&&r.__k||Ee,y=e.length;for(o.__d=f,Ke(o,e,C),f=o.__d,_=0;_<y;_++)(u=o.__k[_])!=null&&typeof u!="boolean"&&typeof u!="function"&&(v=u.__i===-1?W:C[u.__i]||W,u.__i=_,fe(t,u,v,n,s,c,l,f,a,d),g=u.__e,u.ref&&v.ref!=u.ref&&(v.ref&&ue(v.ref,null,u),d.push(u.ref,u.__c||g,u)),w==null&&g!=null&&(w=g),65536&u.__u||v.__k===u.__k?(f&&!f.isConnected&&(f=O(v)),f=Le(u,f,t)):typeof u.type=="function"&&u.__d!==void 0?f=u.__d:g&&(f=g.nextSibling),u.__d=void 0,u.__u&=-196609);o.__d=f,o.__e=w}function Ke(t,e,o){var r,n,s,c,l,f=e.length,a=o.length,d=a,_=0;for(t.__k=[],r=0;r<f;r++)c=r+_,(n=t.__k[r]=(n=e[r])==null||typeof n=="boolean"||typeof n=="function"?null:typeof n=="string"||typeof n=="number"||typeof n=="bigint"||n.constructor==String?X(null,n,null,null,null):ce(n)?X(R,{children:n},null,null,null):n.constructor===void 0&&n.__b>0?X(n.type,n.props,n.key,n.ref?n.ref:null,n.__v):n)!=null?(n.__=t,n.__b=t.__b+1,l=Je(n,o,c,d),n.__i=l,s=null,l!==-1&&(d--,(s=o[l])&&(s.__u|=131072)),s==null||s.__v===null?(l==-1&&_--,typeof n.type!="function"&&(n.__u|=65536)):l!==c&&(l===c+1?_++:l>c?d>f-c?_+=l-c:_--:l<c?l==c-1&&(_=l-c):_=0,l!==r+_&&(n.__u|=65536))):(s=o[c])&&s.key==null&&s.__e&&(131072&s.__u)==0&&(s.__e==t.__d&&(t.__d=O(s)),_e(s,s,!1),o[c]=null,d--);if(d)for(r=0;r<a;r++)(s=o[r])!=null&&(131072&s.__u)==0&&(s.__e==t.__d&&(t.__d=O(s)),_e(s,s))}function Le(t,e,o){var r,n;if(typeof t.type=="function"){for(r=t.__k,n=0;r&&n<r.length;n++)r[n]&&(r[n].__=t,e=Le(r[n],e,o));return e}t.__e!=e&&(o.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Je(t,e,o,r){var n=t.key,s=t.type,c=o-1,l=o+1,f=e[o];if(f===null||f&&n==f.key&&s===f.type&&(131072&f.__u)==0)return o;if(r>(f!=null&&(131072&f.__u)==0?1:0))for(;c>=0||l<e.length;){if(c>=0){if((f=e[c])&&(131072&f.__u)==0&&n==f.key&&s===f.type)return c;c--}if(l<e.length){if((f=e[l])&&(131072&f.__u)==0&&n==f.key&&s===f.type)return l;l++}}return-1}function he(t,e,o){e[0]==="-"?t.setProperty(e,o??""):t[e]=o==null?"":typeof o!="number"||We.test(e)?o:o+"px"}function V(t,e,o,r,n){var s;e:if(e==="style")if(typeof o=="string")t.style.cssText=o;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)o&&e in o||he(t.style,e,"");if(o)for(e in o)r&&o[e]===r[e]||he(t.style,e,o[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=o,o?r?o.u=r.u:(o.u=ae,t.addEventListener(e,s?se:re,s)):t.removeEventListener(e,s?se:re,s);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e in t)try{t[e]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,o))}}function me(t){return function(e){if(this.l){var o=this.l[e.type+t];if(e.t==null)e.t=ae++;else if(e.t<o.u)return;return o(b.event?b.event(e):e)}}}function fe(t,e,o,r,n,s,c,l,f,a){var d,_,v,u,g,w,C,y,x,N,A,E,T,H,F,i=e.type;if(e.constructor!==void 0)return null;128&o.__u&&(f=!!(32&o.__u),s=[l=e.__e=o.__e]),(d=b.__b)&&d(e);e:if(typeof i=="function")try{if(y=e.props,x=(d=i.contextType)&&r[d.__c],N=d?x?x.props.value:d.__:r,o.__c?C=(_=e.__c=o.__c).__=_.__E:("prototype"in i&&i.prototype.render?e.__c=_=new i(y,N):(e.__c=_=new Z(y,N),_.constructor=i,_.render=Ze),x&&x.sub(_),_.props=y,_.state||(_.state={}),_.context=N,_.__n=r,v=_.__d=!0,_.__h=[],_._sb=[]),_.__s==null&&(_.__s=_.state),i.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=L({},_.__s)),L(_.__s,i.getDerivedStateFromProps(y,_.__s))),u=_.props,g=_.state,_.__v=e,v)i.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(i.getDerivedStateFromProps==null&&y!==u&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(y,N),!_.__e&&(_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(y,_.__s,N)===!1||e.__v===o.__v)){for(e.__v!==o.__v&&(_.props=y,_.state=_.__s,_.__d=!1),e.__e=o.__e,e.__k=o.__k,e.__k.forEach(function(p){p&&(p.__=e)}),A=0;A<_._sb.length;A++)_.__h.push(_._sb[A]);_._sb=[],_.__h.length&&c.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(y,_.__s,N),_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(u,g,w)})}if(_.context=N,_.props=y,_.__P=t,_.__e=!1,E=b.__r,T=0,"prototype"in i&&i.prototype.render){for(_.state=_.__s,_.__d=!1,E&&E(e),d=_.render(_.props,_.state,_.context),H=0;H<_._sb.length;H++)_.__h.push(_._sb[H]);_._sb=[]}else do _.__d=!1,E&&E(e),d=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++T<25);_.state=_.__s,_.getChildContext!=null&&(r=L(L({},r),_.getChildContext())),v||_.getSnapshotBeforeUpdate==null||(w=_.getSnapshotBeforeUpdate(u,g)),Te(t,ce(F=d!=null&&d.type===R&&d.key==null?d.props.children:d)?F:[F],e,o,r,n,s,c,l,f,a),_.base=e.__e,e.__u&=-161,_.__h.length&&c.push(_),C&&(_.__E=_.__=null)}catch(p){e.__v=null,f||s!=null?(e.__e=l,e.__u|=f?160:32,s[s.indexOf(l)]=null):(e.__e=o.__e,e.__k=o.__k),b.__e(p,e,o)}else s==null&&e.__v===o.__v?(e.__k=o.__k,e.__e=o.__e):e.__e=Xe(o.__e,e,o,r,n,s,c,f,a);(d=b.diffed)&&d(e)}function Fe(t,e,o){e.__d=void 0;for(var r=0;r<o.length;r++)ue(o[r],o[++r],o[++r]);b.__c&&b.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(s){s.call(n)})}catch(s){b.__e(s,n.__v)}})}function Xe(t,e,o,r,n,s,c,l,f){var a,d,_,v,u,g,w,C=o.props,y=e.props,x=e.type;if(x==="svg"?n="http://www.w3.org/2000/svg":x==="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),s!=null){for(a=0;a<s.length;a++)if((u=s[a])&&"setAttribute"in u==!!x&&(x?u.localName===x:u.nodeType===3)){t=u,s[a]=null;break}}if(t==null){if(x===null)return document.createTextNode(y);t=document.createElementNS(n,x,y.is&&y),s=null,l=!1}if(x===null)C===y||l&&t.data===y||(t.data=y);else{if(s=s&&ee.call(t.childNodes),C=o.props||W,!l&&s!=null)for(C={},a=0;a<t.attributes.length;a++)C[(u=t.attributes[a]).name]=u.value;for(a in C)if(u=C[a],a!="children"){if(a=="dangerouslySetInnerHTML")_=u;else if(a!=="key"&&!(a in y)){if(a=="value"&&"defaultValue"in y||a=="checked"&&"defaultChecked"in y)continue;V(t,a,null,u,n)}}for(a in y)u=y[a],a=="children"?v=u:a=="dangerouslySetInnerHTML"?d=u:a=="value"?g=u:a=="checked"?w=u:a==="key"||l&&typeof u!="function"||C[a]===u||V(t,a,u,C[a],n);if(d)l||_&&(d.__html===_.__html||d.__html===t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(_&&(t.innerHTML=""),Te(t,ce(v)?v:[v],e,o,r,x==="foreignObject"?"http://www.w3.org/1999/xhtml":n,s,c,s?s[0]:o.__k&&O(o,0),l,f),s!=null)for(a=s.length;a--;)s[a]!=null&&He(s[a]);l||(a="value",g!==void 0&&(g!==t[a]||x==="progress"&&!g||x==="option"&&g!==C[a])&&V(t,a,g,C[a],n),a="checked",w!==void 0&&w!==t[a]&&V(t,a,w,C[a],n))}return t}function ue(t,e,o){try{typeof t=="function"?t(e):t.current=e}catch(r){b.__e(r,o)}}function _e(t,e,o){var r,n;if(b.unmount&&b.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||ue(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){b.__e(s,e)}r.base=r.__P=null}if(r=t.__k)for(n=0;n<r.length;n++)r[n]&&_e(r[n],e,o||typeof t.type!="function");o||t.__e==null||He(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function Ze(t,e,o){return this.constructor(t,o)}function Ge(t,e,o){var r,n,s,c;b.__&&b.__(t,e),n=(r=!1)?null:e.__k,s=[],c=[],fe(e,t=e.__k=Ve(R,null,[t]),n||W,W,e.namespaceURI,n?null:e.firstChild?ee.call(e.childNodes):null,s,n?n.__e:e.firstChild,r,c),Fe(s,t,c)}ee=Ee.slice,b={__e:function(t,e,o,r){for(var n,s,c;e=e.__;)if((n=e.__c)&&!n.__)try{if((s=n.constructor)&&s.getDerivedStateFromError!=null&&(n.setState(s.getDerivedStateFromError(t)),c=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t,r||{}),c=n.__d),c)return n.__E=n}catch(l){t=l}throw t}},Ne=0,Z.prototype.setState=function(t,e){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=L({},this.state),typeof t=="function"&&(t=t(L({},o),this.props)),t&&L(o,t),t!=null&&this.__v&&(e&&this._sb.push(e),de(this))},Z.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),de(this))},Z.prototype.render=R,D=[],Ae=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ne=function(t,e){return t.__v.__b-e.__v.__b},Y.__r=0,ae=0,re=me(!1),se=me(!0);var Qe=0;function m(t,e,o,r,n,s){e||(e={});var c,l,f=e;if("ref"in f)for(l in f={},e)l=="ref"?c=e[l]:f[l]=e[l];var a={type:t,props:f,key:o,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Qe,__i:-1,__u:0,__source:n,__self:s};if(typeof t=="function"&&(c=t.defaultProps))for(l in c)f[l]===void 0&&(f[l]=c[l]);return b.vnode&&b.vnode(a),a}const Ye="modulepreload",qe=function(t,e){return new URL(t,e).href},ve={},et=function(e,o,r){let n=Promise.resolve();if(o&&o.length>0){const c=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),f=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(o.map(a=>{if(a=qe(a,r),a in ve)return;ve[a]=!0;const d=a.endsWith(".css"),_=d?'[rel="stylesheet"]':"";if(!!r)for(let g=c.length-1;g>=0;g--){const w=c[g];if(w.href===a&&(!d||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${_}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":Ye,d||(u.as="script"),u.crossOrigin="",u.href=a,f&&u.setAttribute("nonce",f),document.head.appendChild(u),d)return new Promise((g,w)=>{u.addEventListener("load",g),u.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${a}`)))})}))}function s(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return n.then(c=>{for(const l of c||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},tt=async()=>{const[{data:t},{data:e}]=await Promise.all([fetch("https://data.aoe4world.com/units/all.json").then(r=>r.json()),et(()=>import("./units-all-jXpphooa.js"),[],import.meta.url).then(r=>r.default,()=>({data:[]}))]),o=Object.fromEntries(e.map(r=>[r.id,r]));return{data:t.map(r=>{var n;return{...r,locale:{...(n=o[r.id])==null?void 0:n.locale}}})}},ye=t=>{switch(t){case"ranged":return 1;case"siege":return 4;case"melee":return 1;case"fire":return 5;case"charge":return 3;default:return 2}},ot=t=>!(t.baseId==="cavalry-archer"&&t.civs.join("")==="ot"),De=t=>Object.entries(Object.groupBy(t.filter(ot),e=>e.baseId)).map(([e,o])=>{const r=Array.from(new Set(o.flatMap(i=>i.name))),n=Array.from(new Set(o.flatMap(i=>{var p;return((p=i.locale.ja)==null?void 0:p.name)??i.name}))),s=Array.from(new Set(o.flatMap(i=>{var p;return((p=i.movement)==null?void 0:p.speed)??[]}))).sort(),l=o.flatMap(i=>i.weapons).filter(i=>i==null?void 0:i.type).map((i,p)=>({idx:p,weapon:i})).sort((i,p)=>ye(i.weapon.type)-ye(p.weapon.type)||i.idx-p.idx).map(i=>i.weapon).map(i=>i?i.damage/i.speed:0),f=Array.from(new Set(o.flatMap(i=>i.armor.map(p=>p?p.type[0]+p.value:"0")))),a=Array.from(new Set(o.map(i=>i.hitpoints))),d=i=>{const p=j=>i[j]?j[0]+Math.floor(i[j]):"";return[p("food"),p("wood"),p("gold"),p("stone"),p("oliveoil"),`(${i.popcap??"_"}/${i.time??"_"})`,p("vizier")].join("")},_=i=>{const p=j=>i[j]||0;return p("food")+p("wood")+p("gold")+p("stone")+p("oliveoil")},v=Array.from(new Set(o.flatMap(i=>d(i.costs)))),u=Array.from(new Set(o.flatMap(i=>_(i.costs)))),g=(i,p)=>{const j=(i.food??0)/p,z=(i.wood??0)/p,h=(i.gold??0)/p,S=(i.stone??0)/p,$=(i.oliveoil??0)/p,M=i.time??0,Re=(i.popcap??1)/p,ze=j+z+h+S+$;return{food:j,wood:z,gold:h,stone:S,oliveoil:$,time:M,popcap:Re,total:ze}},w=(i,p=1)=>{const j=g(i,p);v.splice(0,v.length,d(j)),u.splice(0,u.length,_(j))};if(e==="shinobi"&&u.join(":")==="0"&&w({food:50,gold:50}),e==="wynguard-footman"){const i=t.find(p=>p.id==="wynguard-footmen");i!=null&&i.costs&&w(i.costs,i.costs.popcap)}if(e==="wynguard-ranger"){const i=t.find(p=>p.id==="wynguard-rangers");i!=null&&i.costs&&w(i.costs,i.costs.popcap)}e==="bedouin-swordsman"&&w({gold:425/8}),e==="bedouin-skirmisher"&&w({gold:425/8}),e==="militia"&&w({food:55},2);const C=Array.from(new Set(o.flatMap(i=>i.classes))),y=Array.from(new Set(o.flatMap(i=>{var p;return((p=i.locale.ja)==null?void 0:p.displayClasses)??i.displayClasses}))),x=Array.from(new Set(o.flatMap(i=>i.producedBy))),N=Array.from(new Set(o.flatMap(i=>i.civs.map(p=>`${p}${i.age}`)))),A=l[0]??-1,E=u.sort((i,p)=>i-p).filter(i=>0<i)[0]??0,T=0<A?A/E:0,H=a.sort((i,p)=>p-i)[0]??0,F=0<H?H/E:0;return{id:e,displayNames:r,jaName:n[0]??r[0]??e,jaNames:n,name:r[0]??e,speed:s[0]??-1,dps:A,armors:f.join(),costText:v.join(),costs:E,dpsPerCost:T,hp:H,hpPerCost:F,civs:N,classes:C,jaClasses:y,producedBy:x,z_:o,z_speed2:s.join(),z_dps:l.join()}}).sort((e,o)=>(o==null?void 0:o.speed)-(e==null?void 0:e.speed));var q,k,te,ge,ie=0,Oe=[],G=[],P=b,we=P.__b,be=P.__r,Ce=P.diffed,xe=P.__c,ke=P.unmount,Pe=P.__;function Be(t,e){P.__h&&P.__h(k,t,ie||e),ie=0;var o=k.__H||(k.__H={__:[],__h:[]});return t>=o.__.length&&o.__.push({__V:G}),o.__[t]}function Ue(t,e,o){var r=Be(q++,2);if(r.t=t,!r.__c&&(r.__=[it(void 0,e),function(l){var f=r.__N?r.__N[0]:r.__[0],a=r.t(f,l);f!==a&&(r.__N=[a,r.__[1]],r.__c.setState({}))}],r.__c=k,!k.u)){var n=function(l,f,a){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(v){return!!v.__c});if(d.every(function(v){return!v.__N}))return!s||s.call(this,l,f,a);var _=!1;return d.forEach(function(v){if(v.__N){var u=v.__[0];v.__=v.__N,v.__N=void 0,u!==v.__[0]&&(_=!0)}}),!(!_&&r.__c.props===l)&&(!s||s.call(this,l,f,a))};k.u=!0;var s=k.shouldComponentUpdate,c=k.componentWillUpdate;k.componentWillUpdate=function(l,f,a){if(this.__e){var d=s;s=void 0,n(l,f,a),s=d}c&&c.call(this,l,f,a)},k.shouldComponentUpdate=n}return r.__N||r.__}function K(t){return ie=5,nt(function(){return{current:t}},[])}function nt(t,e){var o=Be(q++,7);return _t(o.__H,e)?(o.__V=t(),o.i=e,o.__h=t,o.__V):o.__}function rt(){for(var t;t=Oe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Q),t.__H.__h.forEach(le),t.__H.__h=[]}catch(e){t.__H.__h=[],P.__e(e,t.__v)}}P.__b=function(t){k=null,we&&we(t)},P.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Pe&&Pe(t,e)},P.__r=function(t){be&&be(t),q=0;var e=(k=t.__c).__H;e&&(te===k?(e.__h=[],k.__h=[],e.__.forEach(function(o){o.__N&&(o.__=o.__N),o.__V=G,o.__N=o.i=void 0})):(e.__h.forEach(Q),e.__h.forEach(le),e.__h=[],q=0)),te=k},P.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Oe.push(e)!==1&&ge===P.requestAnimationFrame||((ge=P.requestAnimationFrame)||st)(rt)),e.__H.__.forEach(function(o){o.i&&(o.__H=o.i),o.__V!==G&&(o.__=o.__V),o.i=void 0,o.__V=G})),te=k=null},P.__c=function(t,e){e.some(function(o){try{o.__h.forEach(Q),o.__h=o.__h.filter(function(r){return!r.__||le(r)})}catch(r){e.some(function(n){n.__h&&(n.__h=[])}),e=[],P.__e(r,o.__v)}}),xe&&xe(t,e)},P.unmount=function(t){ke&&ke(t);var e,o=t.__c;o&&o.__H&&(o.__H.__.forEach(function(r){try{Q(r)}catch(n){e=n}}),o.__H=void 0,e&&P.__e(e,o.__v))};var $e=typeof requestAnimationFrame=="function";function st(t){var e,o=function(){clearTimeout(r),$e&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(o,100);$e&&(e=requestAnimationFrame(o))}function Q(t){var e=k,o=t.__c;typeof o=="function"&&(t.__c=void 0,o()),k=e}function le(t){var e=k;t.__c=t.__(),k=e}function _t(t,e){return!t||t.length!==e.length||e.some(function(o,r){return o!==t[r]})}function it(t,e){return typeof e=="function"?e(t):e}const I=t=>{const e=(o,r)=>r.all?o.every(([,n])=>n)?o.map(([n])=>[n,!1]):o.map(([n])=>[n,!0]):r.keys?o.map(([n])=>[n,r.keys.includes(n)]):o.map(([n,s])=>n===r.key?[n,r.val]:[n,s]);return()=>{const[o,r]=Ue(e,t),n=o.filter(s=>s[1]).map(s=>s[0]);return[o,r,n]}},lt=[{id:"ab",name:"Abbasid Dynasty",href:"https://aoe4world.com/explorer/civs/abbasid"},{id:"ay",name:"Ayyubids",href:"https://aoe4world.com/explorer/civs/ayyubids"},{id:"by",name:"Byzantines",href:"https://aoe4world.com/explorer/civs/byzantines"},{id:"ch",name:"Chinese",href:"https://aoe4world.com/explorer/civs/chinese"},{id:"de",name:"Delhi Sultanate",href:"https://aoe4world.com/explorer/civs/delhi"},{id:"en",name:"English",href:"https://aoe4world.com/explorer/civs/english"},{id:"fr",name:"French",href:"https://aoe4world.com/explorer/civs/french"},{id:"hr",name:"Holy Roman Empire",href:"https://aoe4world.com/explorer/civs/hre"},{id:"ja",name:"Japanese",href:"https://aoe4world.com/explorer/civs/japanese"},{id:"je",name:"Jeanne d'Arc",href:"https://aoe4world.com/explorer/civs/jeannedarc"},{id:"ma",name:"Malians",href:"https://aoe4world.com/explorer/civs/malians"},{id:"mo",name:"Mongols",href:"https://aoe4world.com/explorer/civs/mongols"},{id:"od",name:"Order of the Dragon",href:"https://aoe4world.com/explorer/civs/orderofthedragon"},{id:"ot",name:"Ottomans",href:"https://aoe4world.com/explorer/civs/ottomans"},{id:"ru",name:"Rus",href:"https://aoe4world.com/explorer/civs/rus"},{id:"zx",name:"Zhu Xi's Legacy",href:"https://aoe4world.com/explorer/civs/zhuxi"},{id:"kt",name:"Knights Templar",href:"https://aoe4world.com/explorer/civs/templar"},{id:"hl",name:"House Lancaster",href:"https://aoe4world.com/explorer/civs/lancaster"}],at=lt.map(t=>[t.id,!0]),ct=I(at),ft=I([1,2,3,4].map(t=>[`${t}`,t<=2])),oe=(t="",e="")=>t.localeCompare(e,void 0,{numeric:!0}),B=(t=0,e=0)=>t-e,J=(t=[],e=[])=>`${t}`.localeCompare(`${e}`,void 0,{numeric:!0}),Ie={name:oe,jaName:oe,icon:!1,speed:B,dps:B,armors:oe,costs:B,dpsPerCost:B,hp:B,hpPerCost:B,classes:J,jaClasses:J,producedBy:J,civs:J},ut=[["speed",-1],["name",1]],pt=(t,e)=>{var o;if(Ie[e]){const r=((o=t.find(n=>e===n[0]))==null?void 0:o[1])??1;return[[e,-r],...t.filter(n=>e!==n[0])]}return t},dt=()=>Ue(pt,ut),ht=t=>(e,o)=>{for(const[r,n]of t)if(r!=="icon"){const s=Ie[r](e==null?void 0:e[r],o==null?void 0:o[r]);if(s)return n*s}return 0},mt=[["name",!1],["jaName",!0],["icon",!0],["speed",!0],["dps",!0],["armors",!1],["costs",!1],["dpsPerCost",!1],["hp",!1],["hpPerCost",!1],["classes",!1],["jaClasses",!1],["producedBy",!1],["civs",!0]],vt=I(mt),Se=(t,e=2)=>Number.isNaN(t)?"NaN":!Number.isFinite(t)||Number.isSafeInteger(t)?`${t}`:t.toFixed(e),je={name:({item:t})=>m("a",{href:`https://aoe4world.com/explorer/units/${t.id}`,rel:"nofollow noopener noreferrer",target:"_blank",children:t.name}),jaName:({item:t})=>m("a",{href:`https://aoe4world.com/explorer/units/${t.id}`,rel:"nofollow noopener noreferrer",target:"_blank",children:t.jaName}),icon:({item:t})=>Array.from(new Set(t.z_.map(e=>e.icon))).filter(e=>!!e).map(e=>{var o;return m("img",{src:e,title:(o=e.match(/\/([^/]*)(\.[^.]+)$/u))==null?void 0:o[1]},e)}),costs:({item:t})=>m("span",{children:t.costText}),dps:({item:t})=>m("span",{children:t.dps.toFixed(2)}),dpsPerCost:({item:t})=>m("span",{children:Se(t.dpsPerCost,6)}),hpPerCost:({item:t})=>m("span",{children:Se(t.hpPerCost,2)}),classes:({item:t})=>m("span",{children:t.classes.join()}),producedBy:({item:t})=>m("span",{children:t.producedBy.join()}),civs:({item:t})=>m("span",{children:t.civs.join()}),def:({item:t,p:e})=>m("span",{children:t[e]})},yt=(t,e)=>{const o=je[e]||je.def;return m(o,{item:t,p:e})},gt=t=>t.target&&t.target instanceof HTMLInputElement?t.target.checked:!1,U=({title:t,set:e,update:o,sub:r})=>m(R,{children:[m("dt",{children:t}),m("dd",{children:[r===!1?null:m("div",{class:"line",children:[m("label",{children:[m("input",{type:"checkbox",checked:e.every(([,n])=>n),onChange:()=>o({all:!0})}),"all"]},"all"),r]}),e.map(([n,s])=>m("label",{children:[m("input",{type:"checkbox",checked:s,onChange:c=>o({key:n,val:gt(c)})}),n]},n))]})]}),wt=({data:t})=>{var i,p,j,z;const e=(i=K()).current??(i.current=Array.from(new Set(t.flatMap(h=>h.classes)))),o=(p=K()).current??(p.current=I(e.map(h=>[h,!0]))),r=(j=K()).current??(j.current=I(e.map(h=>[h,h==="ship"||h==="warship"]))),n=(z=K()).current??(z.current=I(Array.from(new Set(t.flatMap(h=>h.producedBy))).map(h=>[h,!0]))),[s,c]=vt(),[l,f]=ct(),[a,d,_]=ft(),[v,u]=dt(),[g,w,C]=o(),[y,x,N]=r(),[A,E,T]=n(),F=De((()=>{let h=t;if(!_.length)return[];if(a.length!==_.length&&(h=h.filter($=>_.includes(`${$.age}`))),!C.length)return[];if(g.length!==C.length&&(h=h.filter($=>$.classes.some(M=>C.includes(M)))),N.length||(h=h.filter($=>!$.classes.some(M=>N.includes(M)))),!T.length)return[];if(A.length!==T.length&&(h=h.filter($=>$.producedBy.some(M=>T.includes(M)))),l.every($=>$[1]))return h;const S=Object.fromEntries(l);return h=h.map($=>({...$,civs:$.civs.filter(M=>S[M])})),h.filter($=>$.civs.length)})()).sort(ht(v));return m("div",{children:[m("dl",{class:"tools",children:[m(U,{title:"civilizations",set:l,update:f}),m(U,{title:"age",set:a,update:d,sub:!1}),m(U,{title:"keys",set:s,update:c,sub:!1}),s.some(([h,S])=>h==="classes"&&S)?m(R,{children:[m(U,{title:"classes",set:g,update:w}),m(U,{title:"exclude classes",set:y,update:x,sub:m("label",{children:[m("input",{type:"checkbox",checked:y.every(([h,S])=>h==="ship"||h==="warship"?S:!S),onChange:()=>x({keys:["ship","warship"]})}),"ship or warship"]},"ship")})]}):null,s.some(([h,S])=>h==="producedBy"&&S)?m(U,{title:"producedBy",set:A,update:E}):null]}),m("table",{children:[m("thead",{children:m("tr",{children:s.filter(([,h])=>h).map(([h])=>m("th",{onClick:()=>u(h),children:h},h))})}),m("tbody",{children:F.map(h=>m("tr",{children:s.filter(([,S])=>S).map(([S])=>m("td",{children:yt(h,S)},S))},h.id))})]})]})},bt=(t,e)=>{let o=0,r=null;return["$$","\\begin{array}{|l|l|l|} \\hline",...t.map((s,c)=>{const l=s.classes.some(a=>a==="ship"||a==="warship")||s.id.startsWith("clocktower")||s.id==="handcannon-ashigaru",f=e(s);return l?{idx:`- (${c+1})`,name:s.name,value:f}:(++o,(r==null?void 0:r[1])!==f&&(r=[o,f]),{idx:`${r[0]} (${c+1})`,name:s.name,value:f})}).map(s=>[s.idx,s.name,s.value].map(c=>"\\text{"+c+"}").join(" & ")+" \\\\\\\\ \\hline"),"\\end{array}","$$"].map(s=>s+`
`).join("")},Ct=async()=>{const t=globalThis,e=await tt(),o=De(e.data);console.log(o),t.json=e,t.list=o,t.texText=bt(o.filter(n=>0<n.hpPerCost&&Number.isFinite(n.hpPerCost)).sort((n,s)=>s.hpPerCost-n.hpPerCost),n=>n.hpPerCost.toFixed(6));const r=document.querySelector("main");r&&Ge(m(wt,{data:e.data}),r)};Promise.resolve().then(Ct).catch(t=>console.error(t));
