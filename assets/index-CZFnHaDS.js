(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const _ of r)if(_.type==="childList")for(const c of _.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(r){const _={};return r.integrity&&(_.integrity=r.integrity),r.referrerPolicy&&(_.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?_.credentials="include":r.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function n(r){if(r.ep)return;r.ep=!0;const _=o(r);fetch(r.href,_)}})();var Y,g,Se,T,ue,Pe,te,ie,oe,re,B={},Ne=[],Be=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ce=Array.isArray;function E(t,e){for(var o in e)t[o]=e[o];return t}function He(t){var e=t.parentNode;e&&e.removeChild(t)}function Ue(t,e,o){var n,r,_,c={};for(_ in e)_=="key"?n=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?Y.call(arguments,2):o),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return K(t,c,n,r,null)}function K(t,e,o,n,r){var _={type:t,props:e,key:o,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++Se,__i:-1,__u:0};return r==null&&g.vnode!=null&&g.vnode(_),_}function O(t){return t.children}function J(t,e){this.props=t,this.context=e}function F(t,e){if(e==null)return t.__?F(t.__,t.__i+1):null;for(var o;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null)return o.__e;return typeof t.type=="function"?F(t):null}function Me(t){var e,o;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null){t.__e=t.__c.base=o.__e;break}return Me(t)}}function fe(t){(!t.__d&&(t.__d=!0)&&T.push(t)&&!G.__r++||ue!==g.debounceRendering)&&((ue=g.debounceRendering)||Pe)(G)}function G(){var t,e,o,n,r,_,c,a;for(T.sort(te);t=T.shift();)t.__d&&(e=T.length,n=void 0,_=(r=(o=t).__v).__e,c=[],a=[],o.__P&&((n=E({},r)).__v=r.__v+1,g.vnode&&g.vnode(n),le(o.__P,n,r,o.__n,o.__P.namespaceURI,32&r.__u?[_]:null,c,_??F(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,Ee(c,n,a),n.__e!=_&&Me(n)),T.length>e&&T.sort(te));G.__r=0}function Ae(t,e,o,n,r,_,c,a,u,l,d){var s,y,f,w,N,k=n&&n.__k||Ne,v=e.length;for(o.__d=u,ze(o,e,k),u=o.__d,s=0;s<v;s++)(f=o.__k[s])!=null&&typeof f!="boolean"&&typeof f!="function"&&(y=f.__i===-1?B:k[f.__i]||B,f.__i=s,le(t,f,y,r,_,c,a,u,l,d),w=f.__e,f.ref&&y.ref!=f.ref&&(y.ref&&ae(y.ref,null,f),d.push(f.ref,f.__c||w,f)),N==null&&w!=null&&(N=w),65536&f.__u||y.__k===f.__k?(u&&!u.isConnected&&(u=F(y)),u=je(f,u,t)):typeof f.type=="function"&&f.__d!==void 0?u=f.__d:w&&(u=w.nextSibling),f.__d=void 0,f.__u&=-196609);o.__d=u,o.__e=N}function ze(t,e,o){var n,r,_,c,a,u=e.length,l=o.length,d=l,s=0;for(t.__k=[],n=0;n<u;n++)c=n+s,(r=t.__k[n]=(r=e[n])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?K(null,r,null,null,null):ce(r)?K(O,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?K(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=t,r.__b=t.__b+1,a=Ie(r,o,c,d),r.__i=a,_=null,a!==-1&&(d--,(_=o[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&s--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a===c+1?s++:a>c?d>u-c?s+=a-c:s--:a<c?a==c-1&&(s=a-c):s=0,a!==n+s&&(r.__u|=65536))):(_=o[c])&&_.key==null&&_.__e&&(131072&_.__u)==0&&(_.__e==t.__d&&(t.__d=F(_)),ne(_,_,!1),o[c]=null,d--);if(d)for(n=0;n<l;n++)(_=o[n])!=null&&(131072&_.__u)==0&&(_.__e==t.__d&&(t.__d=F(_)),ne(_,_))}function je(t,e,o){var n,r;if(typeof t.type=="function"){for(n=t.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=t,e=je(n[r],e,o));return e}t.__e!=e&&(o.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Ie(t,e,o,n){var r=t.key,_=t.type,c=o-1,a=o+1,u=e[o];if(u===null||u&&r==u.key&&_===u.type&&(131072&u.__u)==0)return o;if(n>(u!=null&&(131072&u.__u)==0?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&(131072&u.__u)==0&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&(131072&u.__u)==0&&r==u.key&&_===u.type)return a;a++}}return-1}function pe(t,e,o){e[0]==="-"?t.setProperty(e,o??""):t[e]=o==null?"":typeof o!="number"||Be.test(e)?o:o+"px"}function W(t,e,o,n,r){var _;e:if(e==="style")if(typeof o=="string")t.style.cssText=o;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)o&&e in o||pe(t.style,e,"");if(o)for(e in o)n&&o[e]===n[e]||pe(t.style,e,o[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=o,o?n?o.u=n.u:(o.u=ie,t.addEventListener(e,_?re:oe,_)):t.removeEventListener(e,_?re:oe,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e in t)try{t[e]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,o))}}function de(t){return function(e){if(this.l){var o=this.l[e.type+t];if(e.t==null)e.t=ie++;else if(e.t<o.u)return;return o(g.event?g.event(e):e)}}}function le(t,e,o,n,r,_,c,a,u,l){var d,s,y,f,w,N,k,v,b,H,i,p,S,A,j,P=e.type;if(e.constructor!==void 0)return null;128&o.__u&&(u=!!(32&o.__u),_=[a=e.__e=o.__e]),(d=g.__b)&&d(e);e:if(typeof P=="function")try{if(v=e.props,b=(d=P.contextType)&&n[d.__c],H=d?b?b.props.value:d.__:n,o.__c?k=(s=e.__c=o.__c).__=s.__E:("prototype"in P&&P.prototype.render?e.__c=s=new P(v,H):(e.__c=s=new J(v,H),s.constructor=P,s.render=Re),b&&b.sub(s),s.props=v,s.state||(s.state={}),s.context=H,s.__n=n,y=s.__d=!0,s.__h=[],s._sb=[]),s.__s==null&&(s.__s=s.state),P.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=E({},s.__s)),E(s.__s,P.getDerivedStateFromProps(v,s.__s))),f=s.props,w=s.state,s.__v=e,y)P.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(P.getDerivedStateFromProps==null&&v!==f&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(v,H),!s.__e&&(s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(v,s.__s,H)===!1||e.__v===o.__v)){for(e.__v!==o.__v&&(s.props=v,s.state=s.__s,s.__d=!1),e.__e=o.__e,e.__k=o.__k,e.__k.forEach(function(M){M&&(M.__=e)}),i=0;i<s._sb.length;i++)s.__h.push(s._sb[i]);s._sb=[],s.__h.length&&c.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(v,s.__s,H),s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(f,w,N)})}if(s.context=H,s.props=v,s.__P=t,s.__e=!1,p=g.__r,S=0,"prototype"in P&&P.prototype.render){for(s.state=s.__s,s.__d=!1,p&&p(e),d=s.render(s.props,s.state,s.context),A=0;A<s._sb.length;A++)s.__h.push(s._sb[A]);s._sb=[]}else do s.__d=!1,p&&p(e),d=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++S<25);s.state=s.__s,s.getChildContext!=null&&(n=E(E({},n),s.getChildContext())),y||s.getSnapshotBeforeUpdate==null||(N=s.getSnapshotBeforeUpdate(f,w)),Ae(t,ce(j=d!=null&&d.type===O&&d.key==null?d.props.children:d)?j:[j],e,o,n,r,_,c,a,u,l),s.base=e.__e,e.__u&=-161,s.__h.length&&c.push(s),k&&(s.__E=s.__=null)}catch(M){e.__v=null,u||_!=null?(e.__e=a,e.__u|=u?160:32,_[_.indexOf(a)]=null):(e.__e=o.__e,e.__k=o.__k),g.__e(M,e,o)}else _==null&&e.__v===o.__v?(e.__k=o.__k,e.__e=o.__e):e.__e=We(o.__e,e,o,n,r,_,c,u,l);(d=g.diffed)&&d(e)}function Ee(t,e,o){e.__d=void 0;for(var n=0;n<o.length;n++)ae(o[n],o[++n],o[++n]);g.__c&&g.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){g.__e(_,r.__v)}})}function We(t,e,o,n,r,_,c,a,u){var l,d,s,y,f,w,N,k=o.props,v=e.props,b=e.type;if(b==="svg"?r="http://www.w3.org/2000/svg":b==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(l=0;l<_.length;l++)if((f=_[l])&&"setAttribute"in f==!!b&&(b?f.localName===b:f.nodeType===3)){t=f,_[l]=null;break}}if(t==null){if(b===null)return document.createTextNode(v);t=document.createElementNS(r,b,v.is&&v),_=null,a=!1}if(b===null)k===v||a&&t.data===v||(t.data=v);else{if(_=_&&Y.call(t.childNodes),k=o.props||B,!a&&_!=null)for(k={},l=0;l<t.attributes.length;l++)k[(f=t.attributes[l]).name]=f.value;for(l in k)if(f=k[l],l!="children"){if(l=="dangerouslySetInnerHTML")s=f;else if(l!=="key"&&!(l in v)){if(l=="value"&&"defaultValue"in v||l=="checked"&&"defaultChecked"in v)continue;W(t,l,null,f,r)}}for(l in v)f=v[l],l=="children"?y=f:l=="dangerouslySetInnerHTML"?d=f:l=="value"?w=f:l=="checked"?N=f:l==="key"||a&&typeof f!="function"||k[l]===f||W(t,l,f,k[l],r);if(d)a||s&&(d.__html===s.__html||d.__html===t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(s&&(t.innerHTML=""),Ae(t,ce(y)?y:[y],e,o,n,b==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:o.__k&&F(o,0),a,u),_!=null)for(l=_.length;l--;)_[l]!=null&&He(_[l]);a||(l="value",w!==void 0&&(w!==t[l]||b==="progress"&&!w||b==="option"&&w!==k[l])&&W(t,l,w,k[l],r),l="checked",N!==void 0&&N!==t[l]&&W(t,l,N,k[l],r))}return t}function ae(t,e,o){try{typeof t=="function"?t(e):t.current=e}catch(n){g.__e(n,o)}}function ne(t,e,o){var n,r;if(g.unmount&&g.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||ae(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(_){g.__e(_,e)}n.base=n.__P=null}if(n=t.__k)for(r=0;r<n.length;r++)n[r]&&ne(n[r],e,o||typeof t.type!="function");o||t.__e==null||He(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function Re(t,e,o){return this.constructor(t,o)}function Ve(t,e,o){var n,r,_,c;g.__&&g.__(t,e),r=(n=!1)?null:e.__k,_=[],c=[],le(e,t=e.__k=Ue(O,null,[t]),r||B,B,e.namespaceURI,r?null:e.firstChild?Y.call(e.childNodes):null,_,r?r.__e:e.firstChild,n,c),Ee(_,t,c)}Y=Ne.slice,g={__e:function(t,e,o,n){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,n||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},Se=0,J.prototype.setState=function(t,e){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},o),this.props)),t&&E(o,t),t!=null&&this.__v&&(e&&this._sb.push(e),fe(this))},J.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),fe(this))},J.prototype.render=O,T=[],Pe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,te=function(t,e){return t.__v.__b-e.__v.__b},G.__r=0,ie=0,oe=de(!1),re=de(!0);var Ke=0;function m(t,e,o,n,r,_){e||(e={});var c,a,u=e;if("ref"in u)for(a in u={},e)a=="ref"?c=e[a]:u[a]=e[a];var l={type:t,props:u,key:o,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Ke,__i:-1,__u:0,__source:r,__self:_};if(typeof t=="function"&&(c=t.defaultProps))for(a in c)u[a]===void 0&&(u[a]=c[a]);return g.vnode&&g.vnode(l),l}const Je=()=>fetch("https://data.aoe4world.com/units/all.json").then(t=>t.json()),he=t=>{switch(t){case"ranged":return 1;case"siege":return 4;case"melee":return 1;case"fire":return 5;case"charge":return 3;default:return 2}},Te=t=>Object.entries(Object.groupBy(t,e=>e.baseId)).map(([e,o])=>{const n=Array.from(new Set(o.flatMap(i=>i.name))),r=Array.from(new Set(o.flatMap(i=>{var p;return((p=i.movement)==null?void 0:p.speed)??[]}))).sort(),c=o.flatMap(i=>i.weapons).filter(i=>i==null?void 0:i.type).map((i,p)=>({idx:p,weapon:i})).sort((i,p)=>he(i.weapon.type)-he(p.weapon.type)||i.idx-p.idx).map(i=>i.weapon).map(i=>i?i.damage/i.speed:0),a=Array.from(new Set(o.flatMap(i=>i.armor.map(p=>p?p.type[0]+p.value:"0")))),u=i=>{const p=S=>i[S]?S[0]+Math.floor(i[S]):"";return[p("food"),p("wood"),p("gold"),p("stone"),p("oliveoil"),`(${i.popcap??"_"}/${i.time??"_"})`,p("vizier")].join("")},l=i=>{const p=S=>i[S]||0;return p("food")+p("wood")+p("gold")+p("stone")+p("oliveoil")},d=Array.from(new Set(o.flatMap(i=>u(i.costs)))),s=Array.from(new Set(o.flatMap(i=>l(i.costs)))),y=(i,p)=>{const S=(i.food??0)/p,A=(i.wood??0)/p,j=(i.gold??0)/p,P=(i.stone??0)/p,M=(i.oliveoil??0)/p,U=i.time??0,z=(i.popcap??1)/p,I=S+A+j+P+M;return{food:S,wood:A,gold:j,stone:P,oliveoil:M,time:U,popcap:z,total:I}},f=(i,p=1)=>{const S=y(i,p);d.splice(0,d.length,u(S)),s.splice(0,s.length,l(S))};if(e==="shinobi"&&s.join(":")==="0"&&f({food:50,gold:50}),e==="wynguard-footman"){const i=t.find(p=>p.id==="wynguard-footmen");i!=null&&i.costs&&f(i.costs,i.costs.popcap)}if(e==="wynguard-ranger"){const i=t.find(p=>p.id==="wynguard-rangers");i!=null&&i.costs&&f(i.costs,i.costs.popcap)}e==="bedouin-swordsman"&&f({gold:425/8}),e==="bedouin-skirmisher"&&f({gold:425/8});const w=Array.from(new Set(o.flatMap(i=>i.classes))),N=Array.from(new Set(o.flatMap(i=>i.producedBy))),k=Array.from(new Set(o.flatMap(i=>i.civs.map(p=>`${p}${i.age}`)))),v=c[0]??-1,b=s.sort((i,p)=>i-p).filter(i=>0<i)[0]??0,H=0<v?v/b:0;return{id:e,displayNames:n,name:n[0]??e,speed:r[0]??-1,dps:v,armors:a.join(),costText:d.join(),costs:b,dpsPerCost:H,civs:k,classes:w,producedBy:N,z_:o,z_speed2:r.join(),z_dps:c.join()}}).sort((e,o)=>(o==null?void 0:o.speed)-(e==null?void 0:e.speed));var Q,x,q,me,_e=0,Fe=[],X=[],$=g,ve=$.__b,ye=$.__r,ge=$.diffed,be=$.__c,we=$.unmount,ke=$.__;function Le(t,e){$.__h&&$.__h(x,t,_e||e),_e=0;var o=x.__H||(x.__H={__:[],__h:[]});return t>=o.__.length&&o.__.push({__V:X}),o.__[t]}function De(t,e,o){var n=Le(Q++,2);if(n.t=t,!n.__c&&(n.__=[Ye(void 0,e),function(a){var u=n.__N?n.__N[0]:n.__[0],l=n.t(u,a);u!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=x,!x.u)){var r=function(a,u,l){if(!n.__c.__H)return!0;var d=n.__c.__H.__.filter(function(y){return!!y.__c});if(d.every(function(y){return!y.__N}))return!_||_.call(this,a,u,l);var s=!1;return d.forEach(function(y){if(y.__N){var f=y.__[0];y.__=y.__N,y.__N=void 0,f!==y.__[0]&&(s=!0)}}),!(!s&&n.__c.props===a)&&(!_||_.call(this,a,u,l))};x.u=!0;var _=x.shouldComponentUpdate,c=x.componentWillUpdate;x.componentWillUpdate=function(a,u,l){if(this.__e){var d=_;_=void 0,r(a,u,l),_=d}c&&c.call(this,a,u,l)},x.shouldComponentUpdate=r}return n.__N||n.__}function R(t){return _e=5,Xe(function(){return{current:t}},[])}function Xe(t,e){var o=Le(Q++,7);return Qe(o.__H,e)?(o.__V=t(),o.i=e,o.__h=t,o.__V):o.__}function Ze(){for(var t;t=Fe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Z),t.__H.__h.forEach(se),t.__H.__h=[]}catch(e){t.__H.__h=[],$.__e(e,t.__v)}}$.__b=function(t){x=null,ve&&ve(t)},$.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),ke&&ke(t,e)},$.__r=function(t){ye&&ye(t),Q=0;var e=(x=t.__c).__H;e&&(q===x?(e.__h=[],x.__h=[],e.__.forEach(function(o){o.__N&&(o.__=o.__N),o.__V=X,o.__N=o.i=void 0})):(e.__h.forEach(Z),e.__h.forEach(se),e.__h=[],Q=0)),q=x},$.diffed=function(t){ge&&ge(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Fe.push(e)!==1&&me===$.requestAnimationFrame||((me=$.requestAnimationFrame)||Ge)(Ze)),e.__H.__.forEach(function(o){o.i&&(o.__H=o.i),o.__V!==X&&(o.__=o.__V),o.i=void 0,o.__V=X})),q=x=null},$.__c=function(t,e){e.some(function(o){try{o.__h.forEach(Z),o.__h=o.__h.filter(function(n){return!n.__||se(n)})}catch(n){e.some(function(r){r.__h&&(r.__h=[])}),e=[],$.__e(n,o.__v)}}),be&&be(t,e)},$.unmount=function(t){we&&we(t);var e,o=t.__c;o&&o.__H&&(o.__H.__.forEach(function(n){try{Z(n)}catch(r){e=r}}),o.__H=void 0,e&&$.__e(e,o.__v))};var xe=typeof requestAnimationFrame=="function";function Ge(t){var e,o=function(){clearTimeout(n),xe&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(o,100);xe&&(e=requestAnimationFrame(o))}function Z(t){var e=x,o=t.__c;typeof o=="function"&&(t.__c=void 0,o()),x=e}function se(t){var e=x;t.__c=t.__(),x=e}function Qe(t,e){return!t||t.length!==e.length||e.some(function(o,n){return o!==t[n]})}function Ye(t,e){return typeof e=="function"?e(t):e}const D=t=>{const e=(o,n)=>n.all?o.every(([,r])=>r)?o.map(([r])=>[r,!1]):o.map(([r])=>[r,!0]):n.keys?o.map(([r])=>[r,n.keys.includes(r)]):o.map(([r,_])=>r===n.key?[r,n.val]:[r,_]);return()=>{const[o,n]=De(e,t),r=o.filter(_=>_[1]).map(_=>_[0]);return[o,n,r]}},qe=[{id:"ab",name:"Abbasid Dynasty",href:"https://aoe4world.com/explorer/civs/abbasid"},{id:"ay",name:"Ayyubids",href:"https://aoe4world.com/explorer/civs/ayyubids"},{id:"by",name:"Byzantines",href:"https://aoe4world.com/explorer/civs/byzantines"},{id:"ch",name:"Chinese",href:"https://aoe4world.com/explorer/civs/chinese"},{id:"de",name:"Delhi Sultanate",href:"https://aoe4world.com/explorer/civs/delhi"},{id:"en",name:"English",href:"https://aoe4world.com/explorer/civs/english"},{id:"fr",name:"French",href:"https://aoe4world.com/explorer/civs/french"},{id:"hr",name:"Holy Roman Empire",href:"https://aoe4world.com/explorer/civs/hre"},{id:"ja",name:"Japanese",href:"https://aoe4world.com/explorer/civs/japanese"},{id:"je",name:"Jeanne d'Arc",href:"https://aoe4world.com/explorer/civs/jeannedarc"},{id:"ma",name:"Malians",href:"https://aoe4world.com/explorer/civs/malians"},{id:"mo",name:"Mongols",href:"https://aoe4world.com/explorer/civs/mongols"},{id:"od",name:"Order of the Dragon",href:"https://aoe4world.com/explorer/civs/orderofthedragon"},{id:"ot",name:"Ottomans",href:"https://aoe4world.com/explorer/civs/ottomans"},{id:"ru",name:"Rus",href:"https://aoe4world.com/explorer/civs/rus"},{id:"zx",name:"Zhu Xi's Legacy",href:"https://aoe4world.com/explorer/civs/zhuxi"},{id:"kt",name:"Knights Templar",href:"https://aoe4world.com/explorer/civs/templar"},{id:"hl",name:"House Lancaster",href:"https://aoe4world.com/explorer/civs/lancaster"}],et=qe.map(t=>[t.id,!0]),tt=D(et),ot=D([1,2,3,4].map(t=>[`${t}`,t<=2])),Ce=(t="",e="")=>t.localeCompare(e,void 0,{numeric:!0}),V=(t=0,e=0)=>t-e,ee=(t=[],e=[])=>`${t}`.localeCompare(`${e}`,void 0,{numeric:!0}),Oe={name:Ce,icon:!1,speed:V,dps:V,armors:Ce,costs:V,dpsPerCost:V,classes:ee,producedBy:ee,civs:ee},rt=[["speed",-1],["name",1]],nt=(t,e)=>{var o;if(Oe[e]){const n=((o=t.find(r=>e===r[0]))==null?void 0:o[1])??1;return[[e,-n],...t.filter(r=>e!==r[0])]}return t},_t=()=>De(nt,rt),st=t=>(e,o)=>{for(const[n,r]of t)if(n!=="icon"){const _=Oe[n](e==null?void 0:e[n],o==null?void 0:o[n]);if(_)return r*_}return 0},it=[["name",!0],["icon",!0],["speed",!0],["dps",!0],["armors",!1],["costs",!1],["dpsPerCost",!1],["classes",!1],["producedBy",!1],["civs",!0]],ct=D(it),lt=t=>Number.isNaN(t)?"NaN":!Number.isFinite(t)||Number.isSafeInteger(t)?`${t}`:t.toFixed(6),$e={name:({item:t})=>m("a",{href:`https://aoe4world.com/explorer/units/${t.id}`,rel:"nofollow noopener noreferrer",target:"_blank",children:t.name}),icon:({item:t})=>Array.from(new Set(t.z_.map(e=>e.icon))).filter(e=>!!e).map(e=>{var o;return m("img",{src:e,title:(o=e.match(/\/([^/]*)(\.[^.]+)$/u))==null?void 0:o[1]},e)}),dps:({item:t})=>m("span",{children:t.dps.toFixed(2)}),costs:({item:t})=>m("span",{children:t.costText}),dpsPerCost:({item:t})=>m("span",{children:lt(t.dpsPerCost)}),classes:({item:t})=>m("span",{children:t.classes.join()}),producedBy:({item:t})=>m("span",{children:t.producedBy.join()}),civs:({item:t})=>m("span",{children:t.civs.join()}),def:({item:t,p:e})=>m("span",{children:t[e]})},at=(t,e)=>{const o=$e[e]||$e.def;return m(o,{item:t,p:e})},ut=t=>t.target&&t.target instanceof HTMLInputElement?t.target.checked:!1,L=({title:t,set:e,update:o,sub:n})=>m(O,{children:[m("dt",{children:t}),m("dd",{children:[n===!1?null:m("div",{class:"line",children:[m("label",{children:[m("input",{type:"checkbox",checked:e.every(([,r])=>r),onChange:()=>o({all:!0})}),"all"]},"all"),n]}),e.map(([r,_])=>m("label",{children:[m("input",{type:"checkbox",checked:_,onChange:c=>o({key:r,val:ut(c)})}),r]},r))]})]}),ft=({data:t})=>{var M,U,z,I;const e=(M=R()).current??(M.current=Array.from(new Set(t.flatMap(h=>h.classes)))),o=(U=R()).current??(U.current=D(e.map(h=>[h,!0]))),n=(z=R()).current??(z.current=D(e.map(h=>[h,h==="ship"||h==="warship"]))),r=(I=R()).current??(I.current=D(Array.from(new Set(t.flatMap(h=>h.producedBy))).map(h=>[h,!0]))),[_,c]=ct(),[a,u]=tt(),[l,d,s]=ot(),[y,f]=_t(),[w,N,k]=o(),[v,b,H]=n(),[i,p,S]=r(),A=Object.fromEntries(a),j=i.length===S.length,P=Te(t.filter(h=>s.includes(`${h.age}`)).filter(h=>h.classes.some(C=>k.includes(C))).filter(h=>!h.classes.some(C=>H.includes(C))).filter(h=>j||h.producedBy.some(C=>S.includes(C))).map(h=>({...h,civs:h.civs.filter(C=>A[C])})).filter(h=>h.civs.length)).sort(st(y));return m("div",{children:[m("dl",{class:"tools",children:[m(L,{title:"civilizations",set:a,update:u}),m(L,{title:"age",set:l,update:d,sub:!1}),m(L,{title:"keys",set:_,update:c,sub:!1}),_.some(([h,C])=>h==="classes"&&C)?m(O,{children:[m(L,{title:"classes",set:w,update:N}),m(L,{title:"exclude classes",set:v,update:b,sub:m("label",{children:[m("input",{type:"checkbox",checked:v.every(([h,C])=>h==="ship"||h==="warship"?C:!C),onChange:()=>b({keys:["ship","warship"]})}),"ship or warship"]},"ship")})]}):null,_.some(([h,C])=>h==="producedBy"&&C)?m(L,{title:"producedBy",set:i,update:p}):null]}),m("table",{children:[m("thead",{children:m("tr",{children:_.filter(([,h])=>h).map(([h])=>m("th",{onClick:()=>f(h),children:h},h))})}),m("tbody",{children:P.map(h=>m("tr",{children:_.filter(([,C])=>C).map(([C])=>m("td",{children:at(h,C)},C))},h.id))})]})]})},pt=async()=>{const t=globalThis,e=await Je(),o=Te(e.data);console.log(o),t.json=e,t.list=o;const n=document.querySelector("main");n&&Ve(m(ft,{data:e.data}),n)};Promise.resolve().then(pt).catch(t=>console.error(t));
